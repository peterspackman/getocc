"use strict";(self.webpackChunkgetocc=self.webpackChunkgetocc||[]).push([[994],{1705:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(6540),i=n(8478),r=n(1878);const a={container:"container_TLw4",header:"header_jWNY",collapseButton:"collapseButton_Mxty",snippet:"snippet_wV3E",ellipsis:"ellipsis_AIQO",explanation:"explanation_NFml",noOutput:"noOutput_vK_S",highlight:"highlight_pqPr"};var o=n(4848);function l(e,t){const n="string"==typeof t?new RegExp(t,"g"):t,s=[];let i,r=0;for(n.lastIndex=0;null!==(i=n.exec(e));)i.index>r&&s.push(e.substring(r,i.index)),s.push((0,o.jsx)("span",{className:a.highlight,children:i[0]},i.index)),r=i.index+i[0].length;return r<e.length&&s.push(e.substring(r)),s.length>0?s:e}function c({commandId:e,pattern:t,startPattern:n,endPattern:i,startLine:c,endLine:d,title:u,maxLines:h,highlightPattern:p,children:m}){const[x,f]=(0,s.useState)(!1),[g,j]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const s=()=>{const s=(0,r.X)(e);if(!s)return void j("");let a="";if(n||i){const e=s.split("\n");let t=0,r=e.length;if(n){const s="string"==typeof n?new RegExp(n):n;t=e.findIndex(e=>s.test(e)),-1===t&&(t=0)}if(i){const n="string"==typeof i?new RegExp(i):i,s=e.slice(t+1).findIndex(e=>n.test(e));-1!==s&&(r=t+1+s)}a=e.slice(t,r).join("\n")}else if(t){const e="string"==typeof t?new RegExp(t,"gm"):t,n=s.match(e);a=n?n.join("\n"):""}else if(void 0!==c){const e=s.split("\n"),t=c-1,n=void 0!==d?d:t+1;a=e.slice(t,n).join("\n")}else a=s;if(h&&a){const e=a.split("\n");e.length>h?(j(e.slice(0,h).join("\n")),y(!0)):(j(a),y(!1))}else j(a),y(!1)};s();const a=setInterval(s,500);return()=>clearInterval(a)},[e,t,n,i,c,d,h]),g?(0,o.jsxs)("div",{className:a.container,children:[u&&(0,o.jsxs)("div",{className:a.header,onClick:()=>f(!x),children:[(0,o.jsx)("strong",{children:u}),(0,o.jsx)("button",{className:a.collapseButton,children:x?"\u25b6":"\u25bc"})]}),!x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("pre",{className:a.snippet,children:[p?l(g,p):g,b&&(0,o.jsx)("span",{className:a.ellipsis,children:"\n..."})]}),m&&(0,o.jsx)("div",{className:a.explanation,children:m})]})]}):(0,o.jsx)("div",{className:a.container,children:(0,o.jsx)("div",{className:a.noOutput,children:(0,o.jsx)("em",{children:"Run the command above to see the output snippet here."})})})}function d(e){return(0,o.jsx)(i.A,{fallback:(0,o.jsx)("div",{children:"Loading..."}),children:()=>(0,o.jsx)(c,{...e})})}},1878:(e,t,n)=>{n.d(t,{H:()=>i,X:()=>r});const s=new Map;function i(e,t){s.set(e,t)}function r(e){return s.get(e)}},3368:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>h,default:()=>f,frontMatter:()=>u,metadata:()=>s,toc:()=>m});const s=JSON.parse('{"id":"wavefunction-analysis","title":"Wavefunction Analysis & Visualization","description":"Learn how to analyze and visualize molecular electronic structure using wavefunction data from SCF calculations.","source":"@site/docs/wavefunction-analysis.mdx","sourceDirName":".","slug":"/wavefunction-analysis","permalink":"/docs/wavefunction-analysis","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Basic SCF Calculations","permalink":"/docs/basic-scf-calculations"},"next":{"title":"Crystal Structures & Lattice Energies","permalink":"/docs/crystal-lattice-energies"}}');var i=n(4848),r=n(8453),a=n(9970),o=n(8529),l=n(9024),c=n(3440),d=n(1705);const u={sidebar_position:3},h="Wavefunction Analysis & Visualization",p={},m=[{value:"Overview",id:"overview",level:2},{value:"Input Molecule",id:"input-molecule",level:2},{value:"Generate the Wavefunction",id:"generate-the-wavefunction",level:2},{value:"Electron Density Visualization",id:"electron-density-visualization",level:2},{value:"Available Properties",id:"available-properties",level:3},{value:"Distributed Multipole Analysis (DMA)",id:"distributed-multipole-analysis-dma",level:2},{value:"Running DMA",id:"running-dma",level:3},{value:"Understanding the Output",id:"understanding-the-output",level:3},{value:"Experimenting with Different Options",id:"experimenting-with-different-options",level:2},{value:"Next Steps",id:"next-steps",level:2}];function x(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"wavefunction-analysis--visualization",children:"Wavefunction Analysis & Visualization"})}),"\n",(0,i.jsx)(t.p,{children:"Learn how to analyze and visualize molecular electronic structure using wavefunction data from SCF calculations."}),"\n",(0,i.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(t.p,{children:["After running an SCF calculation, you have a wavefunction file (",(0,i.jsx)(t.code,{children:".owf.json"}),") - containing the complete\nelectronic structure using the specified method and atomic orbital basis.\nThere's pretty much no end to the information we can extract from a wavefunction file, but some popular options are:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Computing the electron density (or visualising MOs) i.e. cube files or isosurfaces"}),"\n",(0,i.jsx)(t.li,{children:"Computing the electrostatic potential at some set of points"}),"\n",(0,i.jsx)(t.li,{children:"Poppulation analysis (e.g. Hirshfeld, or Distributed Multipole Analysis)"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"input-molecule",children:"Input Molecule"}),"\n",(0,i.jsx)(t.p,{children:"Let's continue with the molecule(s) from the previous tutorial. Make sure you have the input file:"}),"\n",(0,i.jsxs)(c.A,{children:[(0,i.jsx)(o.A,{file:"input.xyz",height:400,initialContent:"3\nwater molecule\nO   -0.7021961  -0.0560603   0.0099423\nH   -1.0221932   0.8467758  -0.0114887\nH    0.2575211   0.0421215   0.0052190",presets:[{name:"H2",content:"2\nhydrogen molecule\nH    0.0    0.0    0.0\nH    0.0    0.0    0.74"},{name:"water",content:"3\nwater molecule\nO   -0.7021961  -0.0560603   0.0099423\nH   -1.0221932   0.8467758  -0.0114887\nH    0.2575211   0.0421215   0.0052190"},{name:"methane",content:"5\nmethane\nC    0.000000    0.000000    0.000000\nH    0.629118    0.629118    0.629118\nH   -0.629118   -0.629118    0.629118\nH   -0.629118    0.629118   -0.629118\nH    0.629118   -0.629118   -0.629118"},{name:"benzene",content:"12\nbenzene\nC    1.396    0.000    0.000\nC    0.698    1.209    0.000\nC   -0.698    1.209    0.000\nC   -1.396    0.000    0.000\nC   -0.698   -1.209    0.000\nC    0.698   -1.209    0.000\nH    2.481    0.000    0.000\nH    1.241    2.149    0.000\nH   -1.241    2.149    0.000\nH   -2.481    0.000    0.000\nH   -1.241   -2.149    0.000\nH    1.241   -2.149    0.000"}]}),(0,i.jsx)(l.A,{file:"input.xyz",cubeFile:"density.cube",format:"xyz",representation:"ball+stick",height:400,cubeIsovalue:.002,cubeColor:"#4169e1",cubeOpacity:.7})]}),"\n",(0,i.jsx)(t.h2,{id:"generate-the-wavefunction",children:"Generate the Wavefunction"}),"\n",(0,i.jsx)(t.p,{children:"First, run the SCF calculation if you don't already have one in local storage for the page:"}),"\n",(0,i.jsx)(a.A,{id:"wf-scf",command:"occ scf input.xyz b3lyp def2-svp",expectedOutputs:["input.owf.json"]}),"\n",(0,i.jsx)(t.h2,{id:"electron-density-visualization",children:"Electron Density Visualization"}),"\n",(0,i.jsxs)(t.p,{children:["Cube files store 3D volumetric data (electron density, electrostatic potential, etc.) on a regular grid (as always, ",(0,i.jsx)(t.a,{href:"https://paulbourke.net/dataformats/cube/",children:"Paul Bourke"})," has a nice page on the format if you're curious). Let's start by computing and visualising the electron density (",(0,i.jsx)(t.code,{children:"density"})," keyword):"]}),"\n",(0,i.jsx)(a.A,{id:"density-cube",command:"occ cube input.owf.json density -n 50 -o density.cube",expectedOutputs:["density.cube"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"density"})," - Property to calculate (electron density \u03c1(r))"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"-n 50"})," - Grid resolution: 50\xd750\xd750 points (good default)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"-o density.cube"})," - Output filename"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"The cube file should automatically appear as a blue isosurface overlaid on the molecule in\nthe viewer above. Use the slider to adjust the isovalue and explore different density contours!"}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsx)(t.p,{children:"Cube files are quite space inefficient (using ASCII/plain text to store floating point numbers always is)\nbut they're widely supported, so they've got that going for them!"})}),"\n",(0,i.jsx)(t.h3,{id:"available-properties",children:"Available Properties"}),"\n",(0,i.jsxs)(t.p,{children:["You can calculate various 3D properties. Click the command above to edit and try:\n",(0,i.jsx)(t.strong,{children:"Common properties:"})]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"density"})," - Total electron density \u03c1(r)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"esp"})," - Electrostatic potential V(r)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"grad_rho"})," - Gradient of density \u2207\u03c1(r)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"laplacian_rho"})," - Laplacian \u2207\xb2\u03c1(r)"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Grid resolution tips:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"-n 30-40"})," - Quick preview (~100 KB)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"-n 50-60"})," - Good default (~450 KB)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"-n 80-100"})," - High quality (~1.8 MB)"]}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"distributed-multipole-analysis-dma",children:"Distributed Multipole Analysis (DMA)"}),"\n",(0,i.jsx)(t.p,{children:"DMA decomposes the electron density into multipole moments (charge, dipole, quadrupole, etc.) centered at atoms. This provides more accurate electrostatics than simple point charges."}),"\n",(0,i.jsx)(t.h3,{id:"running-dma",children:"Running DMA"}),"\n",(0,i.jsx)(a.A,{id:"dma",command:"occ dma input.owf.json --max-rank 2 -p dma.punch",expectedOutputs:["dma.punch"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Parameters:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"--max-rank 2"})," - Include up to quadrupole moments (rank 0=charge, 1=dipole, 2=quadrupole)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"-p dma.punch"})," - Output file in GDMA punch format"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"understanding-the-output",children:"Understanding the Output"}),"\n",(0,i.jsxs)(d.A,{commandId:"dma",startPattern:"DMA multipole moments",endPattern:"Wall clock time",highlightPattern:"\\|?Q\\d+[cs]?\\|?",title:"DMA Multipoles",maxLines:100,children:[(0,i.jsx)(t.p,{children:"The output shows multipole moments for each atom in spherical harmonic form:"}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"For each atom:"})}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Position"})," (x, y, z in Angstroms) and radius (effective extent of multipoles)"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Q00 (monopole)"}),": Net atomic charge in atomic units"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Oxygen: Q00 = -0.277 (negative, electron-rich)"}),"\n",(0,i.jsx)(t.li,{children:"Hydrogens: Q00 \u2248 +0.14 each (positive)"}),"\n",(0,i.jsx)(t.li,{children:"Sum should equal total molecular charge (0 for neutral)"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"|Q1| (dipole magnitude)"}),": Strength of directional charge distribution"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Q10, Q11c, Q11s: Components in spherical harmonic basis"}),"\n",(0,i.jsx)(t.li,{children:"Describes polarity around each atom"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"|Q2| (quadrupole magnitude)"}),": Shape of charge distribution"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Q20, Q21c, Q21s, Q22c, Q22s: Five quadrupole components"}),"\n",(0,i.jsx)(t.li,{children:"Describes ellipticity/asphericity of electron density"}),"\n"]}),"\n"]}),"\n"]}),(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Total multipoles"}),": Sum of all atomic contributions relative to molecular origin"]}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Used to verify convergence and check total molecular properties"}),"\n",(0,i.jsx)(t.li,{children:"Total Q00 should be zero for neutral molecules"}),"\n"]})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Higher ranks for accuracy:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Rank 2"}),": Good for most organic molecules"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Rank 4"}),": Better for highly polar/charged systems"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Rank 5+"}),": Diminishing returns, rarely needed"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Higher order multipoles can be essential to reproduce some electrostatic interactions between molecules, but\nand beyond short range can be almost identical to the full QM electrostatic interactions - though they miss\nthe short range charge density overlap contributions (so-called 'penetration' error)."}),"\n",(0,i.jsx)(t.admonition,{type:"tip",children:(0,i.jsxs)(t.p,{children:["You don't have to worry about it for point charges, but for higher order multipoles generally depend on their\naxis frame ",(0,i.jsx)(t.strong,{children:"and"})," origin. This makes computing them/using them pretty fiddly - which is no doubt part of the\nreason they're not so widely used as point charges (also more terms, so slower to compute)."]})}),"\n",(0,i.jsx)(t.h2,{id:"experimenting-with-different-options",children:"Experimenting with Different Options"}),"\n",(0,i.jsx)(t.p,{children:"Click the commands above to edit them and try:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Cube file properties:"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"occ cube input.owf.json esp -n 50 -o density.cube        # Electrostatic potential\nocc cube input.owf.json density --orbital=homo -n 50 -o density.cube  # highest occupied molecular orbital (\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Grid resolution:"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"-n 30    # Fast, small file (~100 KB)\n-n 50    # Good default (~450 KB)\n-n 80    # High quality (~1.8 MB), might take an eternity for things like exact ESP\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"DMA rank:"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"--max-rank 0    # Charges only\n--max-rank 2    # Up to quadrupole (good default)\n--max-rank 4    # Higher accuracy for crystals\n"})}),"\n",(0,i.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(t.p,{children:"Now you can visualize and analyze molecular electronic structure! Continue to:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"./crystal-lattice-energies",children:"Crystal Structures & Lattice Energies"})," - Apply wavefunction methods to crystals"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.a,{href:"./crystal-growth-morphology",children:"Crystal Growth & Morphology"})," - Calculate surface energies and growth shapes"]}),"\n"]})]})}function f(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},3440:(e,t,n)=>{n.d(t,{A:()=>r});n(6540);const s={container:"container_kzAw",leftPanel:"leftPanel_mtYq",rightPanel:"rightPanel_U6Mb"};var i=n(4848);function r({children:e}){const[t,n]=e;return(0,i.jsxs)("div",{className:s.container,children:[(0,i.jsx)("div",{className:s.leftPanel,children:t}),(0,i.jsx)("div",{className:s.rightPanel,children:n})]})}},5859:(e,t,n)=>{n.d(t,{T:()=>a,k:()=>r});n(6540);const s={inlineIndicator:"inlineIndicator_pX1_",cornerIndicator:"cornerIndicator_G6Rs",dot:"dot_RipS",text:"text_hm7p",supported:"supported_V56n",unsupported:"unsupported_lfpn"};var i=n(4848);function r(){const e="undefined"!=typeof SharedArrayBuffer,t="undefined"!=typeof window&&window.crossOriginIsolated;return{hasSharedArrayBuffer:e,isCrossOriginIsolated:t,hasWorker:"undefined"!=typeof Worker,isSupported:e&&t}}function a({showText:e=!1,position:t="inline",onClick:n}){const{isSupported:a,hasSharedArrayBuffer:o,isCrossOriginIsolated:l,hasWorker:c}=r(),d=["SharedArrayBuffer: "+(o?"\u2713":"\u2717"),"Cross-Origin Isolated: "+(l?"\u2713":"\u2717"),"Web Workers: "+(c?"\u2713":"\u2717"),"",a?"Multi-threading available":"Limited mode - performance may be reduced","","Tap for details"].join("\n"),u=e=>{if(n)n();else{e.preventDefault();const t="undefined"!=typeof navigator?navigator.userAgent:"Unknown";alert(`Browser Support Status\n\nSharedArrayBuffer: ${o?"\u2713 Supported":"\u2717 Not Available"}\nCross-Origin Isolated: ${l?"\u2713 Enabled":"\u2717 Disabled"}\nWeb Workers: ${c?"\u2713 Supported":"\u2717 Not Available"}\n\nStatus: ${a?"Full multi-threading support":"Limited mode - some features may be slower"}\n\nBrowser: ${t}`)}},h="corner"===t?s.cornerIndicator:s.inlineIndicator;return(0,i.jsxs)("div",{className:`${h} ${a?s.supported:s.unsupported}`,title:d,onClick:u,role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),u(e))},children:[(0,i.jsx)("span",{className:s.dot,children:"\u25cf"}),e&&(0,i.jsx)("span",{className:s.text,children:a?"Ready":"Limited"})]})}},8529:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(6540),i=n(8478),r=n(8768);const a={container:"container_rdK7",presetsBar:"presetsBar_ah8Z",presetButton:"presetButton_WzcF",header:"header_TlCS",filename:"filename_iOB_",actions:"actions_VUHV",buttonPrimary:"buttonPrimary_vooK",buttonSecondary:"buttonSecondary_O8Rn",editorWrapper:"editorWrapper_lmji",editor:"editor_Ep0I",message:"message_Go7n",footer:"footer_yWuD",hint:"hint_l7DP",modalOverlay:"modalOverlay_XkzU",modalContent:"modalContent_x_MQ",modalHeader:"modalHeader_rJUK",modalEditor:"modalEditor_S1Iz"};var o=n(4848);function l({file:e,initialContent:t="",language:n="text",width:i="100%",height:l=300,readonly:c=!1,presets:d=[]}){const[u,h]=(0,s.useState)(t),[p,m]=(0,s.useState)(t),[x,f]=(0,s.useState)(!1),[g,j]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(()=>{try{const n=r.b.getFiles(),s=e.startsWith("/")?e:"/"+e,i=n[s];if(i){const e=(new TextDecoder).decode(i);h(e),m(e)}else if(t){h(t),m(t);const e=(new TextEncoder).encode(t);r.b.writeFile(s,e)}}catch(n){console.error("Error loading file:",n)}})()},[e,t]),(0,s.useEffect)(()=>{f(u!==p)},[u,p]);const v=()=>{try{const t=e.startsWith("/")?e:"/"+e,n=(new TextEncoder).encode(u);r.b.writeFile(t,n),m(u),j("File saved successfully!"),setTimeout(()=>j(""),3e3)}catch(t){j(`Error saving file: ${t.message}`),setTimeout(()=>j(""),5e3)}},w=()=>{h(p),j("Changes discarded"),setTimeout(()=>j(""),3e3)},C=async()=>{try{await navigator.clipboard.writeText(u),j("Copied to clipboard!"),setTimeout(()=>j(""),3e3)}catch(e){j("Failed to copy"),setTimeout(()=>j(""),3e3)}},_=e=>{h(e.target.value)};return(0,o.jsxs)("div",{className:a.container,style:{width:i,height:l},children:[d.length>0&&(0,o.jsx)("div",{className:a.presetsBar,children:d.map((t,n)=>(0,o.jsx)("button",{onClick:()=>(t=>{h(t);try{const n=e.startsWith("/")?e:"/"+e,s=(new TextEncoder).encode(t);r.b.writeFile(n,s),m(t),j("Loaded preset"),setTimeout(()=>j(""),2e3)}catch(n){j(`Error loading preset: ${n.message}`),setTimeout(()=>j(""),5e3)}})(t.content),className:a.presetButton,title:`Load ${t.name}`,children:t.name},n))}),(0,o.jsxs)("div",{className:a.header,children:[(0,o.jsx)("div",{className:a.filename,children:e}),(0,o.jsxs)("div",{className:a.actions,children:[(0,o.jsx)("button",{onClick:()=>y(!0),className:a.buttonSecondary,title:"Expand to full screen",children:"Expand"}),(0,o.jsx)("button",{onClick:C,className:a.buttonSecondary,title:"Copy to clipboard",children:"Copy"}),!c&&x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:w,className:a.buttonSecondary,children:"Reset"}),(0,o.jsx)("button",{onClick:v,className:a.buttonPrimary,children:"Save to VFS"})]})]})]}),(0,o.jsxs)("div",{className:a.editorWrapper,children:[(0,o.jsx)("textarea",{value:u,onChange:_,readOnly:c,className:a.editor,spellCheck:!1}),g&&(0,o.jsx)("span",{className:a.message,children:g})]}),x&&!c&&(0,o.jsx)("div",{className:a.footer,children:(0,o.jsx)("small",{className:a.hint,children:'Unsaved changes - click "Save to VFS" to update the file'})}),b&&(0,o.jsx)("div",{className:a.modalOverlay,onClick:()=>y(!1),children:(0,o.jsxs)("div",{className:a.modalContent,onClick:e=>e.stopPropagation(),children:[(0,o.jsxs)("div",{className:a.modalHeader,children:[(0,o.jsx)("div",{className:a.filename,children:e}),(0,o.jsxs)("div",{className:a.actions,children:[(0,o.jsx)("button",{onClick:C,className:a.buttonSecondary,title:"Copy to clipboard",children:"Copy"}),!c&&x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:w,className:a.buttonSecondary,children:"Reset"}),(0,o.jsx)("button",{onClick:v,className:a.buttonPrimary,children:"Save to VFS"})]}),(0,o.jsx)("button",{onClick:()=>y(!1),className:a.buttonSecondary,title:"Close",children:"Close"})]})]}),(0,o.jsxs)("div",{className:a.editorWrapper,children:[(0,o.jsx)("textarea",{value:u,onChange:_,readOnly:c,className:a.modalEditor,spellCheck:!1,autoFocus:!0}),g&&(0,o.jsx)("span",{className:a.message,children:g})]})]})})]})}function c(e){return(0,o.jsx)(i.A,{fallback:(0,o.jsx)("div",{children:"Loading editor..."}),children:()=>(0,o.jsx)(l,{...e})})}},8634:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(6540),i=n(7851);const r={viewerContainer:"viewerContainer_i823",viewer:"viewer_AT5C",controls:"controls_He34",trajectoryControls:"trajectoryControls_FBT8",controlButtons:"controlButtons_G8ip",sliderContainer:"sliderContainer_WyWV",frameSlider:"frameSlider_YPdB",frameInfo:"frameInfo_jlzR",helpText:"helpText_Fz6Z",cubeControls:"cubeControls_m_W_",sliderLabel:"sliderLabel_S8Vg",slider:"slider_JOwf",optionsButton:"optionsButton_s3yl",optionsPanel:"optionsPanel_CTLN",optionItem:"optionItem_NCc6"};var a=n(4848);function o(e){try{const t=e.trim().split("\n");if(t.length<6)return null;const n=t[2].trim().split(/\s+/),s=parseFloat(n[1]),i=parseFloat(n[2]),r=parseFloat(n[3]),a=t[3].trim().split(/\s+/),o=t[4].trim().split(/\s+/),l=t[5].trim().split(/\s+/),c=parseInt(a[0]),d=parseInt(o[0]),u=parseInt(l[0]),h=parseFloat(a[1]),p=parseFloat(o[2]),m=parseFloat(l[3]),x=.529177;return{xMin:s*x,xMax:(s+(c-1)*h)*x,yMin:i*x,yMax:(i+(d-1)*p)*x,zMin:r*x,zMax:(r+(u-1)*m)*x}}catch(t){return console.error("Error parsing cube boundaries:",t),null}}function l(e){const t=e.trim().split("\n");if(t.length<6)return{min:1e-5,max:.5};const n=t[2].trim().split(/\s+/);let s=1/0,i=-1/0;for(let l=6+Math.abs(parseInt(n[0]));l<t.length;l++){const e=t[l].trim().split(/\s+/);for(const t of e){const e=parseFloat(t);isNaN(e)||(e<s&&(s=e),e>i&&(i=e))}}if(!isFinite(s)||!isFinite(i))return{min:1e-5,max:.5};const r=i-s;let a=s-.1*r,o=i+.1*r;return a=s>=0?Math.max(1e-5,a):Math.max(-1,a),o=Math.min(1,o),{min:a,max:o}}function c({data:e,cubeData:t,format:n="xyz",representation:c="ball+stick",width:d,height:u,backgroundColor:h="#ffffff",showControls:p=!0,cubeIsovalue:m=.002,cubeColor:x="#4169e1",cubeOpacity:f=.8,showMolecule:g=!0}){const j=(0,s.useRef)(null),b=(0,s.useRef)(null),y=(0,s.useRef)(null),v=(0,s.useRef)(null),w=(0,s.useRef)(null),[C,_]=(0,s.useState)(m),[N,k]=(0,s.useState)(1e-5),[S,F]=(0,s.useState)(.5),[E,I]=(0,s.useState)(!1),[O,A]=(0,s.useState)(!1),[T,B]=(0,s.useState)(null),M=()=>"dark"===document.documentElement.getAttribute("data-theme")?"#1b1b1d":h;(0,s.useEffect)(()=>{if(!j.current)return;const e=new i.BI(j.current,{backgroundColor:M()});b.current=e;const t=()=>{b.current&&b.current.handleResize()};window.addEventListener("resize",t);const n=new MutationObserver(()=>{b.current&&b.current.setParameters({backgroundColor:M()})});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>{window.removeEventListener("resize",t),n.disconnect(),b.current&&b.current.dispose()}},[h]),(0,s.useEffect)(()=>{if(!b.current||!e)return;const s=b.current;if(s.removeAllComponents(),v.current=null,y.current=null,"cube"===n){const{min:t,max:n}=l(e);k(t),F(n);const i=o(e);B(i);const r=new Blob([e],{type:"text/plain"});s.loadFile(r,{ext:"cube"}).then(e=>{if(!e)return;y.current=e;const t=e.addRepresentation("surface",{color:x,opacity:f,isolevel:C,isolevelType:"value",smooth:1});v.current=t,g&&e.addRepresentation("ball+stick",{sele:"*"}),e.autoView()}).catch(e=>{console.error("Error loading cube file:",e)})}else{let r=e,a=n;if("xyz"===n)try{r=function(e){const t=e.trim().split("\n");if(t.length<3)throw new Error("Invalid XYZ file: too few lines");const n=parseInt(t[0]);if(isNaN(n))throw new Error("Invalid XYZ file: first line must be number of atoms");let s=[];s.push("REMARK   XYZ file converted to PDB"),s.push(`REMARK   ${t[1]}`);for(let i=0;i<n&&i+2<t.length;i++){const e=t[i+2].trim();if(!e)continue;const n=e.split(/\s+/);if(n.length<4)continue;const r=n[0],a=parseFloat(n[1]),o=parseFloat(n[2]),l=parseFloat(n[3]);if(isNaN(a)||isNaN(o)||isNaN(l))continue;const c=(i+1).toString().padStart(5),d=r.padEnd(4),u="MOL".padEnd(3),h="A",p="1".padStart(4),m=a.toFixed(3).padStart(8),x=o.toFixed(3).padStart(8),f=l.toFixed(3).padStart(8),g="1.00",j="0.00".padStart(6),b=r.padStart(12);s.push(`ATOM  ${c} ${d} ${u} ${h}${p}    ${m}${x}${f}  ${g}${j}${b}`)}return s.push("END"),s.join("\n")}(e),a="pdb"}catch(i){return void console.error("Error converting XYZ to PDB:",i)}else if("cif"===n)try{r=function(e){const t=e.trim().split("\n");let n=1,s=1,i=1,r=90,a=90,o=90;const l=[];let c=!1,d=-1,u=-1,h=-1,p=-1,m=-1;for(let f=0;f<t.length;f++){const e=t[f].trim();if(e.startsWith("_cell_length_a")?n=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_length_b")?s=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_length_c")?i=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_angle_alpha")?r=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_angle_beta")?a=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_angle_gamma")&&(o=parseFloat(e.split(/\s+/)[1])),e.startsWith("_atom_site_label"))c=!0,d=0;else if(c&&e.startsWith("_atom_site_"))e.includes("_atom_site_type_symbol")?u=e.split(/\s+/).length-1:e.includes("_atom_site_fract_x")?h=e.split(/\s+/).length-1:e.includes("_atom_site_fract_y")?p=e.split(/\s+/).length-1:e.includes("_atom_site_fract_z")&&(m=e.split(/\s+/).length-1);else if(c&&!e.startsWith("_")&&!e.startsWith("loop_")&&e.length>0){const t=e.split(/\s+/);if(t.length>=5){const e=t[0],r=t[1],a=parseFloat(t[2])*n,o=parseFloat(t[3])*s,c=parseFloat(t[4])*i;l.push({label:e,element:r,x:a,y:o,z:c})}}}if(0===l.length)throw new Error("No atoms found in CIF file");let x=[];return x.push("REMARK   CIF file converted to PDB (asymmetric unit only)"),x.push(`CRYST1${n.toFixed(3).padStart(9)}${s.toFixed(3).padStart(9)}${i.toFixed(3).padStart(9)}${r.toFixed(2).padStart(7)}${a.toFixed(2).padStart(7)}${o.toFixed(2).padStart(7)} P 1           1`),l.forEach((e,t)=>{const n=(t+1).toString().padStart(5),s=e.element.padEnd(4),i="MOL".padEnd(3),r="1".padStart(4),a=e.x.toFixed(3).padStart(8),o=e.y.toFixed(3).padStart(8),l=e.z.toFixed(3).padStart(8),c="0.00".padStart(6),d=e.element.padStart(12);x.push(`ATOM  ${n} ${s} ${i} A${r}    ${a}${o}${l}  1.00${c}${d}`)}),x.push("END"),x.join("\n")}(e),a="pdb"}catch(i){return void console.error("Error converting CIF to PDB:",i)}const d=new Blob([r],{type:"text/plain"});s.loadFile(d,{ext:a}).then(e=>{if(e&&(e.addRepresentation(c),e.autoView(),t)){const{min:e,max:n}=l(t);k(e),F(n);const i=o(t);B(i);const r=new Blob([t],{type:"text/plain"});s.loadFile(r,{ext:"cube"}).then(e=>{if(!e)return;y.current=e;const t=e.addRepresentation("surface",{color:x,opacity:f,isolevel:C,isolevelType:"value",smooth:1});v.current=t,s.autoView()}).catch(e=>{console.error("Error loading cube overlay:",e)})}}).catch(e=>{console.error("Error loading structure:",e)})}},[e,t,n,c,m,x,f,g]);return(0,s.useEffect)(()=>{if(b.current&&T){if(w.current)try{const e=w.current.parent;e&&b.current.removeComponent(e),w.current=null}catch(e){console.warn("Error removing previous box:",e)}if(O)try{const e=new i.yp("cube-bounds"),{xMin:t,xMax:n,yMin:s,yMax:r,zMin:a,zMax:o}=T,l=[.5,.5,.5],c=.02;e.addCylinder([t,s,a],[n,s,a],l,c),e.addCylinder([n,s,a],[n,r,a],l,c),e.addCylinder([n,r,a],[t,r,a],l,c),e.addCylinder([t,r,a],[t,s,a],l,c),e.addCylinder([t,s,o],[n,s,o],l,c),e.addCylinder([n,s,o],[n,r,o],l,c),e.addCylinder([n,r,o],[t,r,o],l,c),e.addCylinder([t,r,o],[t,s,o],l,c),e.addCylinder([t,s,a],[t,s,o],l,c),e.addCylinder([n,s,a],[n,s,o],l,c),e.addCylinder([n,r,a],[n,r,o],l,c),e.addCylinder([t,r,a],[t,r,o],l,c);const d=b.current.addComponentFromObject(e).addRepresentation("buffer");w.current=d}catch(e){console.error("Could not show cube boundaries:",e)}}},[O,T]),(0,a.jsxs)("div",{className:r.viewerContainer,style:{width:d,height:u||void 0,minHeight:u?void 0:400},children:[(0,a.jsx)("div",{ref:j,className:r.viewer}),("cube"===n||t)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:r.cubeControls,children:[(0,a.jsxs)("label",{className:r.sliderLabel,children:[(0,a.jsx)("span",{style:{fontSize:"0.7rem",opacity:.7},children:"Isovalue:"}),(0,a.jsx)("strong",{children:C.toExponential(2)}),(0,a.jsx)("input",{type:"range",min:N,max:S,step:(S-N)/1e3,value:C,onChange:e=>{const t=parseFloat(e.target.value);_(t),v.current&&v.current.setParameters({isolevel:t})},className:r.slider})]}),(0,a.jsx)("button",{className:r.optionsButton,onClick:()=>I(!E),title:"Options",children:"\u22ee"})]}),E&&(0,a.jsxs)("div",{className:r.optionsPanel,children:[(0,a.jsx)("div",{className:r.optionItem,children:(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{type:"checkbox",checked:O,onChange:e=>A(e.target.checked)}),(0,a.jsx)("span",{children:"Show cube boundaries"})]})}),(0,a.jsxs)("div",{className:r.optionItem,style:{fontSize:"0.7rem",opacity:.6,marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid var(--ifm-color-emphasis-200)"},children:["Range: ",N.toExponential(2)," to ",S.toExponential(2)]})]})]})]})}},8768:(e,t,n)=>{n.d(t,{b:()=>s});const s=new class{files={};listeners=new Set;addFiles(e){this.files={...this.files,...e},this.notifyListeners()}getFiles(){return{...this.files}}getFile(e){return this.files[e]}hasFile(e){return e in this.files}writeFile(e,t){this.files[e]=t,this.notifyListeners()}removeFile(e){delete this.files[e],this.notifyListeners()}clear(){this.files={},this.notifyListeners()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e(this.getFiles()))}getFilePaths(){return Object.keys(this.files)}}},9024:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(6540),i=n(8478),r=n(8634),a=n(8768),o=n(4848);function l({file:e,cubeFile:t,format:n="xyz",representation:i="ball+stick",width:l=600,height:c=400,backgroundColor:d="#ffffff",showControls:u=!0,cubeIsovalue:h=.002,cubeColor:p="#4169e1",cubeOpacity:m=.7}){const[x,f]=(0,s.useState)(""),[g,j]=(0,s.useState)(""),[b,y]=(0,s.useState)("");return(0,s.useEffect)(()=>{const n=()=>{try{const n=a.b.getFiles(),s=n[e.startsWith("/")?e:"/"+e];if(s){const e=new TextDecoder;f(e.decode(s)),y("")}else y(`File not found: ${e}. Run the command above first.`);if(t){const e=n[t.startsWith("/")?t:"/"+t];if(e){const t=new TextDecoder;j(t.decode(e))}else j("")}}catch(n){y(`Error loading file: ${n.message}`)}};n();const s=setInterval(n,1e3);return()=>clearInterval(s)},[e,t]),b?(0,o.jsxs)("div",{style:{padding:"2rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",margin:"1rem 0"},children:[(0,o.jsx)("strong",{children:"Viewer:"})," ",b]}):x?(0,o.jsx)(r.A,{data:x,cubeData:g,format:n,representation:i,width:l,height:c,backgroundColor:d,showControls:u,cubeIsovalue:h,cubeColor:p,cubeOpacity:m}):(0,o.jsxs)("div",{style:{padding:"2rem",background:"#e7f3ff",border:"1px solid #2196f3",borderRadius:"8px",margin:"1rem 0",textAlign:"center"},children:[(0,o.jsx)("p",{children:"Waiting for file to load..."}),(0,o.jsx)("small",{children:"Run the command above to generate the visualization file."})]})}function c(e){return(0,o.jsx)(i.A,{fallback:(0,o.jsx)("div",{children:"Loading viewer..."}),children:()=>(0,o.jsx)(l,{...e})})}},9970:(e,t,n)=>{n.d(t,{A:()=>u});var s=n(6540),i=n(8478),r=n(8768),a=n(1878),o=n(5859);const l={container:"container_QiYZ",header:"header_Z3QX",commandBlock:"commandBlock_KPH0",command:"command_ftG7",commandInput:"commandInput_U5bk",actions:"actions_r8hD",button:"button_UEjd",runButton:"runButton_N7WP",stopButton:"stopButton_URq7",fileTabsContainer:"fileTabsContainer_wVnt",fileTabs:"fileTabs_IWaP",fileTab:"fileTab_kFag",fileTabActive:"fileTabActive_bCSo",fileTabContent:"fileTabContent_nXd0",inputFilesList:"inputFilesList_CxPD",availableFiles:"availableFiles_UYvm",fileChips:"fileChips_YunZ",fileChip:"fileChip_OBOL",output:"output_MWSm",outputHeader:"outputHeader_CPe2",collapseButton:"collapseButton_O3zR",outputContent:"outputContent_TjO4",slideDown:"slideDown_ZpYm",highlight:"highlight_PWya",info:"info_NsEM",success:"success_xKBI",warning:"warning_qPPR",error:"error_MrOe",files:"files_dF_d",fileGrid:"fileGrid_mqCm",fileItem:"fileItem_Q2KA",fileName:"fileName_BN6Z",downloadIcon:"downloadIcon_IugX",footer:"footer_dCHd",expectedOutputs:"expectedOutputs_qSor",statusIndicator:"statusIndicator_eDzH"};var c=n(4848);function d({id:e,command:t,inputFiles:n={},expectedOutputs:i=[],language:d="bash",maxHeight:u="500px",highlights:h=[]}){const[p,m]=(0,s.useState)(""),[x,f]=(0,s.useState)(!1),[g,j]=(0,s.useState)(null),[b,y]=(0,s.useState)({}),[v,w]=(0,s.useState)([]),[C,_]=(0,s.useState)(t),[N,k]=(0,s.useState)(!1),[S,F]=(0,s.useState)(!1),[E,I]=(0,s.useState)("input"),O=(0,s.useRef)(null),A=(0,s.useRef)(null);(0,s.useEffect)(()=>{const e=()=>{w(r.b.getFilePaths())};e();return r.b.subscribe(e)},[]),(0,s.useEffect)(()=>{A.current&&!S&&(A.current.scrollTop=A.current.scrollHeight)},[p,S]),(0,s.useEffect)(()=>{e&&p&&(0,a.H)(e,p)},[e,p]),(0,s.useEffect)(()=>{Object.keys(b).length>0&&I("output")},[b]);const T=async()=>{m(""),j(null),y({}),f(!0),k(!1),F(!1);try{const e=C.trim().split(/\s+/);if("occ"!==e[0])return j('Command must start with "occ"'),void f(!1);const t=e.slice(1),s={},i=r.b.getFiles();Object.assign(s,i);for(const[r,l]of Object.entries(n)){const e=new TextEncoder;s["/"+r]=e.encode(l)}const a=new Set(Object.keys(s)),o=new Worker("/occ-run-worker.js");O.current=o,o.onmessage=e=>{const{type:t,text:n,code:s,files:i}=e.data;switch(t){case"output":case"error":m(e=>e+n+"\n");break;case"ready":break;case"exit":if(i){const e={},t={};for(const[n,s]of Object.entries(i)){const i=n.startsWith("/basis/")||n.startsWith("/methods/")||n.startsWith("/solvent/")||n.startsWith("/lib/")||n.startsWith("/usr/")||n.startsWith("/etc/")||n.startsWith("/dev/")||"/dev/null"===n||"/sgdata.json"===n;i||(t[n]=s),a.has(n)||i||(e[n]=s)}r.b.addFiles(t),y(e)}o.terminate(),O.current=null,f(!1),0!==s&&j(`Command exited with code ${s}`)}},o.onerror=e=>{j(e.message),f(!1),o.terminate(),O.current=null},o.postMessage({command:t.join(" "),cwd:"/",files:s})}catch(e){j(e.message),f(!1)}},B=()=>{_(t),k(!1)},M=Object.keys(b);return(0,c.jsxs)("div",{className:l.container,children:[(0,c.jsxs)("div",{className:l.header,children:[(0,c.jsx)("div",{className:l.commandBlock,children:N?(0,c.jsx)("input",{type:"text",value:C,onChange:e=>_(e.target.value),onBlur:()=>k(!1),onKeyDown:e=>{"Enter"===e.key?T():"Escape"===e.key&&B()},className:l.commandInput,autoFocus:!0}):(0,c.jsx)("code",{className:l.command,onClick:()=>k(!0),title:"Click to edit",children:C})}),(0,c.jsxs)("div",{className:l.actions,children:[C!==t&&(0,c.jsx)("button",{onClick:B,className:l.button,title:"Reset to original command",children:"Reset"}),(0,c.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(C)},className:l.button,title:"Copy command to clipboard",children:"Copy"}),(0,c.jsx)("button",{onClick:x?()=>{O.current&&(O.current.terminate(),O.current=null,f(!1),m(e=>e+"\n[Command interrupted by user]\n"))}:T,className:`${l.button} ${x?l.stopButton:l.runButton}`,title:x?"Stop command":"Run command in browser",children:x?"Stop":"Run"})]})]}),(Object.keys(n).length>0||M.length>0)&&(0,c.jsxs)("div",{className:l.fileTabsContainer,children:[(0,c.jsxs)("div",{className:l.fileTabs,children:[Object.keys(n).length>0&&(0,c.jsxs)("button",{className:`${l.fileTab} ${"input"===E?l.fileTabActive:""}`,onClick:()=>I("input"),children:["Input Files (",Object.keys(n).length,")"]}),M.length>0&&(0,c.jsxs)("button",{className:`${l.fileTab} ${"output"===E?l.fileTabActive:""}`,onClick:()=>I("output"),children:["Output Files (",M.length,")"]})]}),(0,c.jsxs)("div",{className:l.fileTabContent,children:["input"===E&&Object.keys(n).length>0&&(0,c.jsx)("ul",{className:l.inputFilesList,children:Object.keys(n).map(e=>(0,c.jsx)("li",{children:(0,c.jsx)("code",{children:e})},e))}),"output"===E&&M.length>0&&(0,c.jsx)("div",{className:l.fileGrid,children:M.map(e=>(0,c.jsxs)("div",{className:l.fileItem,onClick:()=>(e=>{const t=b[e];if(!t)return;const n=new Blob([t],{type:"application/octet-stream"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=e.split("/").pop()||"download",i.click(),URL.revokeObjectURL(s)})(e),title:"Click to download",children:[(0,c.jsx)("span",{className:l.fileName,children:e.startsWith("/")?e.slice(1):e}),(0,c.jsx)("span",{className:l.downloadIcon,children:"\u2193"})]},e))})]})]}),v.length>0&&0===Object.keys(n).length&&0===M.length&&(0,c.jsxs)("div",{className:l.availableFiles,children:[(0,c.jsx)("strong",{children:"Available files from previous commands:"}),(0,c.jsx)("div",{className:l.fileChips,children:v.map(e=>(0,c.jsx)("span",{className:l.fileChip,children:e.startsWith("/")?e.slice(1):e},e))})]}),p&&(0,c.jsxs)("div",{className:l.output,children:[(0,c.jsxs)("div",{className:l.outputHeader,onClick:()=>F(!S),children:[(0,c.jsx)("strong",{children:"Output"}),(0,c.jsx)("button",{className:l.collapseButton,children:S?"\u25b6":"\u25bc"})]}),!S&&(0,c.jsx)("pre",{ref:A,className:l.outputContent,style:{maxHeight:u},children:(()=>{if(0===h.length||!p)return p;const e=p.split("\n"),t=[];return e.forEach((n,i)=>{let r=[n];h.forEach((e,t)=>{const n="string"==typeof e.pattern?new RegExp(e.pattern,"g"):e.pattern,s=[];r.forEach(r=>{if("string"==typeof r){let a=0;const o=[];let d;for(n.lastIndex=0;null!==(d=n.exec(r));)o.push({...d}),d.index===n.lastIndex&&n.lastIndex++;0===o.length?s.push(r):(o.forEach((n,o)=>{n.index>a&&s.push(r.substring(a,n.index));const d=e.className||"highlight";s.push((0,c.jsx)("span",{className:l[d],title:e.label,children:n[0]},`${i}-${t}-${o}`)),a=n.index+n[0].length}),a<r.length&&s.push(r.substring(a)))}else s.push(r)}),r=s}),t.push((0,c.jsxs)(s.Fragment,{children:[r,i<e.length-1&&"\n"]},i))}),t})()})]}),g&&(0,c.jsxs)("div",{className:l.error,children:[(0,c.jsx)("strong",{children:"Error:"})," ",g]}),(0,c.jsxs)("div",{className:l.footer,children:[i.length>0&&!x&&0===M.length&&!p&&(0,c.jsx)("div",{className:l.expectedOutputs,children:(0,c.jsxs)("small",{children:["Expected outputs: ",i.join(", ")]})}),(0,c.jsx)("div",{className:l.statusIndicator,children:(0,c.jsx)(o.T,{position:"inline",showText:!1})})]})]})}function u(e){return(0,c.jsx)(i.A,{fallback:(0,c.jsx)("div",{children:"Loading..."}),children:()=>(0,c.jsx)(d,{...e})})}}}]);