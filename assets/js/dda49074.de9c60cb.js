"use strict";(self.webpackChunkgetocc=self.webpackChunkgetocc||[]).push([[753],{8478:(e,t,r)=>{r.d(t,{A:()=>i});r(6540);var n=r(2303),a=r(4848);function i({children:e,fallback:t}){return(0,n.A)()?(0,a.jsx)(a.Fragment,{children:e?.()}):t??null}},9121:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var n=r(6540),a=r(8478),i=r(1656),o=r(4848);function s(){return(0,o.jsx)(i.A,{title:"Try OCC",description:"Try OCC WebAssembly in your browser",noFooter:!0,children:(0,o.jsx)("div",{style:{height:"calc(100vh - var(--ifm-navbar-height))"},children:(0,o.jsx)(a.A,{fallback:(0,o.jsx)("div",{children:"Loading..."}),children:()=>(0,o.jsx)(l,{})})})})}function l(){return(0,n.useEffect)(()=>{const e=document.createElement("link");return e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/npm/@xterm/xterm@5.5.0/css/xterm.css",document.head.appendChild(e),Promise.all([r.e(856).then(r.t.bind(r,7856,23)),r.e(616).then(r.t.bind(r,3616,23))]).then(([e,t])=>{const{Terminal:r}=e,{FitAddon:n}=t;!function(e,t){let r="",n=!1,a="/",i=[],o=-1,s=null,l=!1,d=null,c=null;const m=document.getElementById("terminal-app");if(!m)return;function f(){const e=document.documentElement,t=getComputedStyle(e),r="dark"===e.getAttribute("data-theme");return{background:t.getPropertyValue("--ifm-background-color").trim(),surface:t.getPropertyValue("--ifm-background-surface-color").trim()||t.getPropertyValue("--ifm-background-color").trim(),foreground:t.getPropertyValue("--ifm-font-color-base").trim(),primary:t.getPropertyValue("--ifm-color-primary").trim(),border:t.getPropertyValue("--ifm-color-emphasis-300").trim(),isDark:r}}const u=f(),g=e=>e?"#1a1b26":"#e1e2e7",p=e=>e?"#24283b":"#dfe0e8";m.innerHTML=`\n    <div id="fileSidebar" style="width: 280px; background: ${p(u.isDark)}; border-right: 1px solid ${u.border}; display: flex; flex-direction: column; overflow: hidden; flex-shrink: 0;">\n      <div id="fileHeader" style="padding: 1rem; border-bottom: 1px solid ${u.border}; color: ${u.foreground}; font-weight: 600; font-size: 0.9rem; display: flex; align-items: center; justify-content: space-between; flex-shrink: 0;">\n        <span>Files</span>\n        <button id="refreshBtn" style="background: ${u.border}; border: none; color: ${u.foreground}; padding: 0.25rem 0.5rem; border-radius: 4px; cursor: pointer; font-size: 0.8rem;">\u21bb</button>\n      </div>\n      <div id="fileList" style="flex: 1; overflow-y: auto; padding: 0.5rem 0; min-height: 0;">\n        <div style="padding: 2rem 1rem; text-align: center; color: ${u.foreground}; opacity: 0.6; font-size: 0.85rem;">Loading...</div>\n      </div>\n    </div>\n    <div id="terminalContainer" style="flex: 1; position: relative; background: ${g(u.isDark)}; min-width: 0; height: 100%;">\n      <div id="terminal" style="width: 100%; height: 100%;"></div>\n      <div id="dropOverlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: ${u.primary}33; border: 3px dashed ${u.primary}; display: none; align-items: center; justify-content: center; font-size: 1.5rem; color: ${u.primary}; pointer-events: none; z-index: 1000;">\n        \ud83d\udcc1 Drop files here to upload\n      </div>\n      <div id="statusBar" style="position: absolute; top: 1rem; right: 1.5rem; background: ${u.isDark?"#24283b":"#dfe0e8"}; border: 1px solid ${u.isDark?"#414868":"#c4c6d4"}; border-radius: 6px; padding: 0.4rem 0.8rem; color: ${u.isDark?"#a9b1d6":"#6172b0"}; font-size: 0.75rem; display: flex; gap: 0.5rem; z-index: 100;">\n        <div id="statusIndicator" style="display: flex; align-items: center; gap: 0.4rem;">\n          <span>\u25cf</span>\n          <span id="statusText">Loading...</span>\n        </div>\n      </div>\n    </div>\n  `;const b=u.isDark?{background:"#1a1b26",foreground:"#c0caf5",cursor:"#c0caf5",cursorAccent:"#1a1b26",selection:"rgba(122, 162, 247, 0.3)",black:"#15161e",red:"#f7768e",green:"#9ece6a",yellow:"#e0af68",blue:"#7aa2f7",magenta:"#bb9af7",cyan:"#7dcfff",white:"#a9b1d6",brightBlack:"#414868",brightRed:"#f7768e",brightGreen:"#9ece6a",brightYellow:"#e0af68",brightBlue:"#7aa2f7",brightMagenta:"#bb9af7",brightCyan:"#7dcfff",brightWhite:"#c0caf5"}:{background:"#e1e2e7",foreground:"#3760bf",cursor:"#3760bf",cursorAccent:"#e1e2e7",selection:"rgba(46, 125, 233, 0.2)",black:"#e9e9ed",red:"#f52a65",green:"#587539",yellow:"#8c6c3e",blue:"#2e7de9",magenta:"#9854f1",cyan:"#007197",white:"#6172b0",brightBlack:"#a8aecb",brightRed:"#f52a65",brightGreen:"#587539",brightYellow:"#8c6c3e",brightBlue:"#2e7de9",brightMagenta:"#9854f1",brightCyan:"#007197",brightWhite:"#3760bf"};d=new e({theme:b,fontFamily:'"Cascadia Code", Menlo, Monaco, "Courier New", monospace',fontSize:13,cursorBlink:!0,scrollback:1e4,scrollOnUserInput:!0,smoothScrollDuration:100});const h=document.getElementById("terminal");if(!h)return;c=new t,d.loadAddon(c),d.open(h),setTimeout(()=>c.fit(),0);function y(){s=new Worker("/occ-worker.js"),s.onmessage=e=>{w(e.data)},s.onerror=e=>{d.writeln(`\x1b[91mWorker error: ${e.message}\x1b[0m\r\n`)}}function w(e){switch(e.type){case"ready":l=!0,C("Ready",!0),d.writeln("\x1b[1;34m\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557"),d.writeln("\x1b[1;34m\u2551         Welcome to OCC WebAssembly Interactive Demo!         \u2551"),d.writeln("\x1b[1;34m\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\x1b[0m"),d.writeln(""),d.writeln("\x1b[1mTry these example commands:\x1b[0m"),d.writeln("  \x1b[33mls\x1b[0m              - List pre-loaded files"),d.writeln("  \x1b[33mcat water.xyz\x1b[0m   - View water molecule structure"),d.writeln("  \x1b[33mcat urea.cif\x1b[0m    - View urea crystal structure"),d.writeln("  \x1b[33mhelp\x1b[0m            - Show all available commands"),d.writeln(""),d.writeln("\x1b[32m\u2713 Ready\x1b[0m"),k(),B();break;case"error":d.writeln(`\x1b[91m${e.text}\x1b[0m`),d.scrollToBottom();break;case"ls":e.files.forEach(e=>d.writeln(e)),d.writeln(""),d.scrollToBottom(),n=!1,k();break;case"cat":const t=e.content.split("\n");t.forEach((e,r)=>{r===t.length-1&&""===e||d.write(e+"\r\n")}),d.write("\r\n"),d.scrollToBottom(),n=!1,k();break;case"pwd":a=e.path,d.writeln(a+"\r\n"),n=!1,k();break;case"cd":a=e.path,n=!1,k();break;case"mkdir":n=!1,k(),B();break;case"writeFile":case"syncFiles":B()}}function k(){d.write(`\r\n\x1b[36m${a}\x1b[0m \x1b[32m$\x1b[0m `),setTimeout(()=>{d.scrollToBottom();const e=d.buffer.active;d.scrollToLine(e.baseY+e.cursorY)},0)}function v(){c&&c.fit()}async function x(e){if(!l||!s)return d.writeln("\x1b[91mModule not ready yet, please wait...\x1b[0m\r\n"),void k();n=!0;const t=e.trim().split(/\s+/),r=t[0],i=t.slice(1);try{switch(r){case"clear":d.clear(),n=!1,k();break;case"pwd":s.postMessage({type:"pwd"});break;case"cd":let e;e=0===i.length?"/":".."===i[0]?"/"!==a&&a.substring(0,a.lastIndexOf("/"))||"/":i[0].startsWith("/")?i[0]:"/"===a?"/"+i[0]:a+"/"+i[0],s.postMessage({type:"cd",data:{path:e}});break;case"ls":const t=i.length>0?i[0]:a;s.postMessage({type:"ls",data:{path:t}});break;case"mkdir":if(0===i.length)d.writeln("mkdir: missing operand\r\n"),n=!1,k();else{const e=i[0].startsWith("/")?i[0]:"/"===a?"/"+i[0]:a+"/"+i[0];s.postMessage({type:"mkdir",data:{path:e}})}break;case"cat":if(0===i.length)d.writeln("cat: missing operand\r\n"),n=!1,k();else{const e=i[0].startsWith("/")?i[0]:"/"===a?"/"+i[0]:a+"/"+i[0];s.postMessage({type:"cat",data:{path:e}})}break;case"help":d.writeln("\x1b[1mAvailable commands:\x1b[0m"),d.writeln("  \x1b[36mocc <args>\x1b[0m  - Run OCC with arguments"),d.writeln("  \x1b[36mls [dir]\x1b[0m    - List directory contents"),d.writeln("  \x1b[36mcd <dir>\x1b[0m    - Change directory"),d.writeln("  \x1b[36mpwd\x1b[0m         - Print working directory"),d.writeln("  \x1b[36mcat <file>\x1b[0m  - Display file contents"),d.writeln("  \x1b[36mmkdir <dir>\x1b[0m - Create directory"),d.writeln("  \x1b[36mclear\x1b[0m       - Clear the terminal"),d.writeln("  \x1b[36mhelp\x1b[0m        - Show this help"),d.writeln(""),d.writeln("\x1b[1mPre-loaded sample files:\x1b[0m"),d.writeln("  \x1b[33mwater.xyz\x1b[0m   - Water molecule (XYZ format)"),d.writeln("  \x1b[33murea.cif\x1b[0m    - Urea crystal structure (CIF format)"),d.writeln(""),d.writeln("\x1b[90mTip: Use Up/Down arrows for command history"),d.writeln("Tip: Drag & drop files to upload to the virtual filesystem\x1b[0m\r\n"),n=!1,k();break;case"occ":return void await E(i);default:d.writeln(`\x1b[91mCommand not found: ${r}\x1b[0m`),d.writeln('Type "help" for available commands\r\n'),n=!1,k()}}catch(o){d.writeln(`\x1b[91mError: ${o.message}\x1b[0m\r\n`),n=!1,k()}}async function E(e){if(s)return new Promise((t,r)=>{C("Running...",!1);new Promise(e=>{const t=r=>{"getFiles"===r.data.type&&(s.removeEventListener("message",t),e(r.data.files))};s.addEventListener("message",t),s.postMessage({type:"getFiles",data:{path:"/"}})}).then(i=>{const o=new Worker("/occ-run-worker.js");o.onmessage=e=>{const{type:r,text:a,code:i,files:l}=e.data;switch(r){case"output":d.writeln(a),d.scrollToBottom();break;case"error":d.writeln(`\x1b[91m${a}\x1b[0m`),d.scrollToBottom();break;case"ready":break;case"exit":s.postMessage({type:"syncFiles",data:{files:l}}),C(0===i?"Ready":"Error",0===i),o.terminate(),n=!1,d.scrollToBottom(),k(),t(i)}},o.onerror=e=>{d.writeln(`\x1b[91mWorker error: ${e.message}\x1b[0m`),C("Error",!1),o.terminate(),n=!1,k(),r(e)},o.postMessage({command:e.join(" "),cwd:a,files:i})})})}function C(e,t){const r=document.getElementById("statusIndicator"),n=document.getElementById("statusText");f();if(n&&(n.textContent=e),r){r.className=t?"status-ready":"Error"===e?"status-error":"";const n=getComputedStyle(document.documentElement).getPropertyValue("--ifm-color-success").trim(),a=getComputedStyle(document.documentElement).getPropertyValue("--ifm-color-danger").trim(),i=getComputedStyle(document.documentElement).getPropertyValue("--ifm-color-secondary").trim();r.style.color=t?n:"Error"===e?a:i}}function B(){if(!s)return;const e=t=>{"getFiles"===t.data.type&&(s.removeEventListener("message",e),L(t.data.files))};s.addEventListener("message",e),s.postMessage({type:"getFiles",data:{path:"/"}})}new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"data-theme"===e.attributeName){const e=f(),t=e.isDark?{background:"#1a1b26",foreground:"#c0caf5",cursor:"#c0caf5",cursorAccent:"#1a1b26",selection:"rgba(122, 162, 247, 0.3)",black:"#15161e",red:"#f7768e",green:"#9ece6a",yellow:"#e0af68",blue:"#7aa2f7",magenta:"#bb9af7",cyan:"#7dcfff",white:"#a9b1d6",brightBlack:"#414868",brightRed:"#f7768e",brightGreen:"#9ece6a",brightYellow:"#e0af68",brightBlue:"#7aa2f7",brightMagenta:"#bb9af7",brightCyan:"#7dcfff",brightWhite:"#c0caf5"}:{background:"#e1e2e7",foreground:"#3760bf",cursor:"#3760bf",cursorAccent:"#e1e2e7",selection:"rgba(46, 125, 233, 0.2)",black:"#e9e9ed",red:"#f52a65",green:"#587539",yellow:"#8c6c3e",blue:"#2e7de9",magenta:"#9854f1",cyan:"#007197",white:"#6172b0",brightBlack:"#a8aecb",brightRed:"#f52a65",brightGreen:"#587539",brightYellow:"#8c6c3e",brightBlue:"#2e7de9",brightMagenta:"#9854f1",brightCyan:"#007197",brightWhite:"#3760bf"};d.options.theme=t;const r=document.getElementById("fileSidebar"),n=document.getElementById("terminalContainer"),a=document.getElementById("statusBar"),i=document.getElementById("fileHeader"),o=document.getElementById("refreshBtn");r&&(r.style.background=p(e.isDark),r.style.borderRight=`1px solid ${e.border}`),n&&(n.style.background=g(e.isDark)),a&&(a.style.background=e.isDark?"#24283b":"#dfe0e8",a.style.border="1px solid "+(e.isDark?"#414868":"#c4c6d4"),a.style.color=e.isDark?"#a9b1d6":"#6172b0"),i&&(i.style.borderBottom=`1px solid ${e.border}`,i.style.color=e.foreground),o&&(o.style.background=e.border,o.style.color=e.foreground)}})}).observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),d.onData(e=>{if(!n)if("\x1b[A"!==e)if("\x1b[B"!==e){if("\r"===e)return d.write("\r\n"),void(r.trim()?(i.push(r.trim()),o=-1,x(r.trim()),r=""):k());if("\x7f"!==e)return"\x03"===e?(d.write("^C\r\n"),r="",n=!1,void k()):void(e>=String.fromCharCode(32)&&e<=String.fromCharCode(126)&&(r+=e,d.write(e)));r.length>0&&(r=r.slice(0,-1),d.write("\b \b"))}else o>0?(d.write("\r\x1b[K"),k(),o--,r=i[i.length-1-o],d.write(r)):0===o&&(d.write("\r\x1b[K"),k(),o=-1,r="");else i.length>0&&o<i.length-1&&(d.write("\r\x1b[K"),k(),o++,r=i[i.length-1-o],d.write(r))}),window.addEventListener("resize",v),setTimeout(v,100);const $=new Set(["/"]);function L(e){const t=document.getElementById("fileList");if(!t)return;const r=Object.keys(e).sort();if(0===r.length)return void(t.innerHTML='<div style="padding: 2rem 1rem; text-align: center; color: #565f89; font-size: 0.85rem;">No files</div>');const n={};function a(e,t=0,r=""){let n="";for(const[i,o]of Object.entries(e)){if("_files"===i)continue;const e=r+"/"+i,s=$.has(e);n+=`\n          <div class="dir-item" data-dir="${e}" style="padding: 0.4rem 1rem; padding-left: ${1.5*t+1}rem; color: var(--ifm-font-color-base); cursor: pointer; display: flex; align-items: center; gap: 0.25rem; font-size: 0.85rem; font-family: 'Menlo', 'Monaco', 'Courier New', monospace; transition: background 0.15s; user-select: none; font-weight: 500;">\n            <span style="font-size: 0.6rem; width: 12px; transition: transform 0.15s; flex-shrink: 0; ${s?"transform: rotate(90deg);":""}">\u25b6</span>\n            <span>${i}/</span>\n          </div>\n          <div class="dir-children" data-parent="${e}" style="display: ${s?"block":"none"};">\n            ${a(o,t+1,e)}\n          </div>\n        `}return e._files&&e._files.forEach(e=>{const r=1.5*t;n+=`\n            <div class="file-item" data-path="${e.path}" style="padding: 0.4rem 1rem; padding-left: ${r+1.2}rem; color: var(--ifm-font-color-base); cursor: pointer; display: flex; align-items: center; gap: 0.25rem; font-size: 0.85rem; font-family: 'Menlo', 'Monaco', 'Courier New', monospace; transition: background 0.15s; user-select: none;">\n              <span>${e.name}</span>\n            </div>\n          `}),n}r.forEach(e=>{const t=e.split("/").filter(e=>e);let r=n;t.forEach((n,a)=>{a===t.length-1?(r._files||(r._files=[]),r._files.push({name:n,path:e})):(r[n]||(r[n]={}),r=r[n])})}),t.innerHTML=a(n),t.querySelectorAll(".dir-item").forEach(e=>{e.addEventListener("click",r=>{r.stopPropagation();const n=e.dataset.dir,a=e.querySelector("span"),i=t.querySelector(`.dir-children[data-parent="${n}"]`);$.has(n)?($.delete(n),a&&(a.style.transform=""),i&&(i.style.display="none")):($.add(n),a&&(a.style.transform="rotate(90deg)"),i&&(i.style.display="block"))}),e.addEventListener("mouseenter",()=>{e.style.background="var(--ifm-color-emphasis-100)"}),e.addEventListener("mouseleave",()=>{e.style.background=""})}),t.querySelectorAll(".file-item").forEach(t=>{t.addEventListener("click",()=>{const r=t.dataset.path;M(r,e[r])}),t.addEventListener("mouseenter",()=>{t.style.background="var(--ifm-color-emphasis-100)"}),t.addEventListener("mouseleave",()=>{t.style.background=""})})}function M(e,t){const r=new Blob([t],{type:"application/octet-stream"}),n=URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=e.split("/").pop()||"download",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n),d.writeln(`\x1b[32mDownloaded: ${e}\x1b[0m\r\n`)}const T=document.getElementById("refreshBtn");T&&T.addEventListener("click",B);const D=m.querySelector("div:nth-child(2)"),A=document.getElementById("dropOverlay");D&&A&&(D.addEventListener("dragover",e=>{e.preventDefault(),A.style.display="flex"}),D.addEventListener("dragleave",e=>{e.target===D&&(A.style.display="none")}),D.addEventListener("drop",async e=>{if(e.preventDefault(),A.style.display="none",!s)return;const t=Array.from(e.dataTransfer?.files||[]);for(const r of t){const e=await r.arrayBuffer(),t=new Uint8Array(e);s.postMessage({type:"writeFile",data:{path:"/"===a?"/"+r.name:a+"/"+r.name,content:t}}),d.writeln(`\x1b[32mUploaded: ${r.name}\x1b[0m\r\n`)}setTimeout(B,100)}));C("Initializing...",!1),y()}(r,n)}),()=>{}},[]),(0,o.jsx)("div",{id:"terminal-app",style:{display:"flex",height:"100%",width:"100%",background:"var(--ifm-background-color)",overflow:"hidden"}})}}}]);