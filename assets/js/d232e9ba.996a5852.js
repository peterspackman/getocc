"use strict";(self.webpackChunkgetocc=self.webpackChunkgetocc||[]).push([[727],{686:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>u,default:()=>f,frontMatter:()=>h,metadata:()=>s,toc:()=>p});const s=JSON.parse('{"id":"basic-scf-calculations","title":"Basic SCF Calculations","description":"Your First Calculation: Water Molecule","source":"@site/docs/basic-scf-calculations.mdx","sourceDirName":".","slug":"/basic-scf-calculations","permalink":"/docs/basic-scf-calculations","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Introduction to OCC","permalink":"/docs/intro"},"next":{"title":"Wavefunction Analysis & Visualization","permalink":"/docs/wavefunction-analysis"}}');var i=n(4848),a=n(8453),l=n(9970),r=n(8529),o=n(9024),c=n(3440),d=n(1705);const h={sidebar_position:2},u="Basic SCF Calculations",m={},p=[{value:"Your First Calculation: Water Molecule",id:"your-first-calculation-water-molecule",level:2},{value:"Input File Format",id:"input-file-format",level:3},{value:"Running the Calculation",id:"running-the-calculation",level:3},{value:"Understanding the Output",id:"understanding-the-output",level:3},{value:"Output Files",id:"output-files",level:3},{value:"Experimenting with Different Methods",id:"experimenting-with-different-methods",level:2},{value:"Common Functionals",id:"common-functionals",level:3},{value:"Basis Sets",id:"basis-sets",level:3},{value:"Common Options",id:"common-options",level:3},{value:"Next Steps",id:"next-steps",level:2}];function x(e){const t={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"basic-scf-calculations",children:"Basic SCF Calculations"})}),"\n","\n",(0,i.jsx)(t.h2,{id:"your-first-calculation-water-molecule",children:"Your First Calculation: Water Molecule"}),"\n",(0,i.jsxs)(t.p,{children:["Let's start with a simple water molecule.\nYou can either do this in the browser here, or on the command line after ",(0,i.jsx)(t.a,{href:"./intro",children:"installing occ"}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"input-file-format",children:"Input File Format"}),"\n",(0,i.jsxs)(t.p,{children:["By default, occ would use something like a ",(0,i.jsx)(t.code,{children:".xyz"})," file, so let's create a file called ",(0,i.jsx)(t.code,{children:"input.xyz"}),":"]}),"\n",(0,i.jsxs)(c.A,{children:[(0,i.jsx)(r.A,{file:"input.xyz",height:400,initialContent:"3\nwater molecule\nO   -0.7021961  -0.0560603   0.0099423\nH   -1.0221932   0.8467758  -0.0114887\nH    0.2575211   0.0421215   0.0052190",presets:[{name:"H2",content:"2\nhydrogen molecule\nH    0.0    0.0    0.0\nH    0.0    0.0    0.74"},{name:"water",content:"3\nwater molecule\nO   -0.7021961  -0.0560603   0.0099423\nH   -1.0221932   0.8467758  -0.0114887\nH    0.2575211   0.0421215   0.0052190"},{name:"methane",content:"5\nmethane\nC    0.000000    0.000000    0.000000\nH    0.629118    0.629118    0.629118\nH   -0.629118   -0.629118    0.629118\nH   -0.629118    0.629118   -0.629118\nH    0.629118   -0.629118   -0.629118"},{name:"benzene",content:"12\nbenzene\nC    1.396    0.000    0.000\nC    0.698    1.209    0.000\nC   -0.698    1.209    0.000\nC   -1.396    0.000    0.000\nC   -0.698   -1.209    0.000\nC    0.698   -1.209    0.000\nH    2.481    0.000    0.000\nH    1.241    2.149    0.000\nH   -1.241    2.149    0.000\nH   -2.481    0.000    0.000\nH   -1.241   -2.149    0.000\nH    1.241   -2.149    0.000"}]}),(0,i.jsx)(o.A,{file:"input.xyz",format:"xyz",representation:"ball+stick",height:400})]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Understanding the XYZ format:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Line 1"}),": Number of atoms (3 for water)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Line 2"}),": Comment line (commonly includes charge, multiplicity, or energy)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Lines 3+"}),": Element symbol followed by Cartesian x, y, z coordinates in Angstroms"]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:'Try editing the coordinates and clicking "Save to VFS" to see the structure update in the viewer!'}),"\n",(0,i.jsx)(t.h3,{id:"running-the-calculation",children:"Running the Calculation"}),"\n",(0,i.jsx)(t.p,{children:"Now run a basic SCF (Self-Consistent Field) calculation:"}),"\n",(0,i.jsx)(l.A,{id:"scf-input",command:"occ scf input.xyz b3lyp def2-svp",expectedOutputs:["input.owf.json"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Command breakdown:"})}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"occ scf"})," - Run an SCF calculation"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"input.xyz"})," - Input geometry file"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"b3lyp"})," - DFT functional (hybrid functional, good general-purpose choice)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"def2-svp"})," - Basis set (double-zeta with polarization functions)"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"understanding-the-output",children:"Understanding the Output"}),"\n",(0,i.jsx)(t.p,{children:"The calculation will show SCF iterations converging to the final energy:"}),"\n",(0,i.jsx)(d.A,{commandId:"scf-input",pattern:"^\\s*#.*|^\\s*\\d+\\s+-?\\d+\\.\\d+.*",highlightPattern:"^\\s*\\d+\\s+",title:"SCF Convergence",maxLines:12,children:(0,i.jsxs)(t.p,{children:["Watch the ",(0,i.jsx)(t.strong,{children:"SCF iterations"})," converge - the energy (column 2) should stabilize and the error (column 3) should decrease as the calculation proceeds."]})}),"\n",(0,i.jsxs)(d.A,{commandId:"scf-input",pattern:"Component\\s+Energy.*|^nuclear\\s+.*|^electronic\\s+.*|^total\\s+.*|^\\w+\\.\\w+\\s+-?\\d+\\.\\d+",highlightPattern:"^total\\s+",title:"Energy Components",maxLines:20,children:[(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Energy components:"})}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"nuclear.repulsion"})," - Electrostatic repulsion between nuclei"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"electronic"})," - Total electronic energy (kinetic + electron-electron repulsion + exchange-correlation)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"total"})," - Final SCF energy (sum of nuclear and electronic contributions)"]}),"\n"]})]}),"\n",(0,i.jsx)(t.h3,{id:"output-files",children:"Output Files"}),"\n",(0,i.jsxs)(d.A,{commandId:"scf-input",pattern:"wavefunction stored in.*",title:"Generated Files",children:[(0,i.jsx)(t.p,{children:"The calculation generates:"}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Wavefunction file"})," (",(0,i.jsx)(t.code,{children:".owf.json"}),") - Contains all electronic structure information including molecular orbitals, electron density, and energies"]}),"\n",(0,i.jsx)(t.li,{children:"This file can be used for further analysis (visualization, property calculations, etc.)"}),"\n"]})]}),"\n",(0,i.jsx)(t.h2,{id:"experimenting-with-different-methods",children:"Experimenting with Different Methods"}),"\n",(0,i.jsx)(t.p,{children:"Click the command above to edit it and try different functionals, basis sets, and options:"}),"\n",(0,i.jsx)(t.p,{children:"For molecular systems like this one, something like hybrid DFT functionals would be almost the default. This can change, depending on the property of interest etc. Play around with some example methods here to see what differences it makes in total energy and in timing:"}),"\n",(0,i.jsx)(t.h3,{id:"common-functionals",children:"Common Functionals"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"hf"})," - Hartree-Fock (or the ",(0,i.jsx)(t.code,{children:"uhf"})," and ",(0,i.jsx)(t.code,{children:"ghf"})," variants)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"pbe"})," - Pure GGA functional"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"b3lyp"})," - Popular hybrid DFT"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"wb97x"})," - Range-separated hybrid GGA"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"basis-sets",children:"Basis Sets"}),"\n",(0,i.jsxs)(t.p,{children:["Generally we'd use the largest basis set we can afford (with some caveats). Most SCF calculations scale faster than linear (",(0,i.jsxs)(t.span,{className:"katex",children:[(0,i.jsx)(t.span,{className:"katex-mathml",children:(0,i.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(t.semantics,{children:[(0,i.jsxs)(t.mrow,{children:[(0,i.jsx)(t.mi,{children:"O"}),(0,i.jsx)(t.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(t.msup,{children:[(0,i.jsx)(t.mi,{children:"N"}),(0,i.jsx)(t.mn,{children:"2"})]}),(0,i.jsx)(t.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(t.annotation,{encoding:"application/x-tex",children:"O(N^2)"})]})})}),(0,i.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(t.span,{className:"base",children:[(0,i.jsx)(t.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,i.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(t.span,{className:"mopen",children:"("}),(0,i.jsxs)(t.span,{className:"mord",children:[(0,i.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,i.jsx)(t.span,{className:"msupsub",children:(0,i.jsx)(t.span,{className:"vlist-t",children:(0,i.jsx)(t.span,{className:"vlist-r",children:(0,i.jsx)(t.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(t.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(t.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(t.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(t.span,{className:"mord mtight",children:"2"})})]})})})})})]}),(0,i.jsx)(t.span,{className:"mclose",children:")"})]})})]}),", ",(0,i.jsxs)(t.span,{className:"katex",children:[(0,i.jsx)(t.span,{className:"katex-mathml",children:(0,i.jsx)(t.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(t.semantics,{children:[(0,i.jsxs)(t.mrow,{children:[(0,i.jsx)(t.mi,{children:"O"}),(0,i.jsx)(t.mo,{stretchy:"false",children:"("}),(0,i.jsxs)(t.msup,{children:[(0,i.jsx)(t.mi,{children:"N"}),(0,i.jsx)(t.mn,{children:"4"})]}),(0,i.jsx)(t.mo,{stretchy:"false",children:")"})]}),(0,i.jsx)(t.annotation,{encoding:"application/x-tex",children:"O(N^4)"})]})})}),(0,i.jsx)(t.span,{className:"katex-html","aria-hidden":"true",children:(0,i.jsxs)(t.span,{className:"base",children:[(0,i.jsx)(t.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),(0,i.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,i.jsx)(t.span,{className:"mopen",children:"("}),(0,i.jsxs)(t.span,{className:"mord",children:[(0,i.jsx)(t.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),(0,i.jsx)(t.span,{className:"msupsub",children:(0,i.jsx)(t.span,{className:"vlist-t",children:(0,i.jsx)(t.span,{className:"vlist-r",children:(0,i.jsx)(t.span,{className:"vlist",style:{height:"0.8141em"},children:(0,i.jsxs)(t.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,i.jsx)(t.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(t.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(t.span,{className:"mord mtight",children:"4"})})]})})})})})]}),(0,i.jsx)(t.span,{className:"mclose",children:")"})]})})]})," for example) with number of basis functions, so naturally there's a limit to what is computationally tractable. Play around with some examples:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"3-21g"})," - Small, split valence basis (very fast, almost certainly not big enough for most properties of interest)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"def2-svp"})," - Double-zeta with polarization (good default)"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"cc-pvtz"})," - Triple-zeta with polarization (production quality)"]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"common-options",children:"Common Options"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Charged/open-shell systems:"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"--charge 1 --multiplicity 2          # Cation with one unpaired electron\n--charge '-1' --multiplicity 2       # Anion, one unpaired electron\n--unrestricted                       # Unrestricted calculation (open-shell)\n"})}),"\n",(0,i.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsx)(t.p,{children:"Now that you can run basic calculations, learn how to:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Visualize the electronic structure (wavefunctions, densities, orbitals)"}),"\n",(0,i.jsx)(t.li,{children:"Optimize molecular geometries"}),"\n",(0,i.jsx)(t.li,{children:"Calculate molecular properties"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["Continue to the next tutorial: ",(0,i.jsx)(t.a,{href:"./wavefunction-analysis",children:"Wavefunction Analysis & Visualization"})]})]})}function f(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},1705:(e,t,n)=>{n.d(t,{A:()=>d});var s=n(6540),i=n(8478),a=n(1878);const l={container:"container_TLw4",header:"header_jWNY",collapseButton:"collapseButton_Mxty",snippet:"snippet_wV3E",ellipsis:"ellipsis_AIQO",explanation:"explanation_NFml",noOutput:"noOutput_vK_S",highlight:"highlight_pqPr"};var r=n(4848);function o(e,t){const n="string"==typeof t?new RegExp(t,"g"):t,s=[];let i,a=0;for(n.lastIndex=0;null!==(i=n.exec(e));)i.index>a&&s.push(e.substring(a,i.index)),s.push((0,r.jsx)("span",{className:l.highlight,children:i[0]},i.index)),a=i.index+i[0].length;return a<e.length&&s.push(e.substring(a)),s.length>0?s:e}function c({commandId:e,pattern:t,startPattern:n,endPattern:i,startLine:c,endLine:d,title:h,maxLines:u,highlightPattern:m,children:p}){const[x,f]=(0,s.useState)(!1),[j,g]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{const s=()=>{const s=(0,a.X)(e);if(!s)return void g("");let l="";if(n||i){const e=s.split("\n");let t=0,a=e.length;if(n){const s="string"==typeof n?new RegExp(n):n;t=e.findIndex(e=>s.test(e)),-1===t&&(t=0)}if(i){const n="string"==typeof i?new RegExp(i):i,s=e.slice(t+1).findIndex(e=>n.test(e));-1!==s&&(a=t+1+s)}l=e.slice(t,a).join("\n")}else if(t){const e="string"==typeof t?new RegExp(t,"gm"):t,n=s.match(e);l=n?n.join("\n"):""}else if(void 0!==c){const e=s.split("\n"),t=c-1,n=void 0!==d?d:t+1;l=e.slice(t,n).join("\n")}else l=s;if(u&&l){const e=l.split("\n");e.length>u?(g(e.slice(0,u).join("\n")),y(!0)):(g(l),y(!1))}else g(l),y(!1)};s();const l=setInterval(s,500);return()=>clearInterval(l)},[e,t,n,i,c,d,u]),j?(0,r.jsxs)("div",{className:l.container,children:[h&&(0,r.jsxs)("div",{className:l.header,onClick:()=>f(!x),children:[(0,r.jsx)("strong",{children:h}),(0,r.jsx)("button",{className:l.collapseButton,children:x?"\u25b6":"\u25bc"})]}),!x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("pre",{className:l.snippet,children:[m?o(j,m):j,b&&(0,r.jsx)("span",{className:l.ellipsis,children:"\n..."})]}),p&&(0,r.jsx)("div",{className:l.explanation,children:p})]})]}):(0,r.jsx)("div",{className:l.container,children:(0,r.jsx)("div",{className:l.noOutput,children:(0,r.jsx)("em",{children:"Run the command above to see the output snippet here."})})})}function d(e){return(0,r.jsx)(i.A,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:()=>(0,r.jsx)(c,{...e})})}},1878:(e,t,n)=>{n.d(t,{H:()=>i,X:()=>a});const s=new Map;function i(e,t){s.set(e,t)}function a(e){return s.get(e)}},3440:(e,t,n)=>{n.d(t,{A:()=>a});n(6540);const s={container:"container_kzAw",leftPanel:"leftPanel_mtYq",rightPanel:"rightPanel_U6Mb"};var i=n(4848);function a({children:e}){const[t,n]=e;return(0,i.jsxs)("div",{className:s.container,children:[(0,i.jsx)("div",{className:s.leftPanel,children:t}),(0,i.jsx)("div",{className:s.rightPanel,children:n})]})}},5859:(e,t,n)=>{n.d(t,{T:()=>l,k:()=>a});n(6540);const s={inlineIndicator:"inlineIndicator_pX1_",cornerIndicator:"cornerIndicator_G6Rs",dot:"dot_RipS",text:"text_hm7p",supported:"supported_V56n",unsupported:"unsupported_lfpn"};var i=n(4848);function a(){const e="undefined"!=typeof SharedArrayBuffer,t="undefined"!=typeof window&&window.crossOriginIsolated;return{hasSharedArrayBuffer:e,isCrossOriginIsolated:t,hasWorker:"undefined"!=typeof Worker,isSupported:e&&t}}function l({showText:e=!1,position:t="inline",onClick:n}){const{isSupported:l,hasSharedArrayBuffer:r,isCrossOriginIsolated:o,hasWorker:c}=a(),d=["SharedArrayBuffer: "+(r?"\u2713":"\u2717"),"Cross-Origin Isolated: "+(o?"\u2713":"\u2717"),"Web Workers: "+(c?"\u2713":"\u2717"),l?"Multi-threading available":"Limited mode - performance may be reduced"].join("\n"),h="corner"===t?s.cornerIndicator:s.inlineIndicator;return(0,i.jsxs)("div",{className:`${h} ${l?s.supported:s.unsupported}`,title:d,onClick:n,role:n?"button":void 0,tabIndex:n?0:void 0,children:[(0,i.jsx)("span",{className:s.dot,children:"\u25cf"}),e&&(0,i.jsx)("span",{className:s.text,children:l?"Ready":"Limited"})]})}},8529:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(6540),i=n(8478),a=n(8768);const l={container:"container_rdK7",presetsBar:"presetsBar_ah8Z",presetButton:"presetButton_WzcF",header:"header_TlCS",filename:"filename_iOB_",actions:"actions_VUHV",buttonPrimary:"buttonPrimary_vooK",buttonSecondary:"buttonSecondary_O8Rn",editorWrapper:"editorWrapper_lmji",editor:"editor_Ep0I",message:"message_Go7n",footer:"footer_yWuD",hint:"hint_l7DP",modalOverlay:"modalOverlay_XkzU",modalContent:"modalContent_x_MQ",modalHeader:"modalHeader_rJUK",modalEditor:"modalEditor_S1Iz"};var r=n(4848);function o({file:e,initialContent:t="",language:n="text",width:i="100%",height:o=300,readonly:c=!1,presets:d=[]}){const[h,u]=(0,s.useState)(t),[m,p]=(0,s.useState)(t),[x,f]=(0,s.useState)(!1),[j,g]=(0,s.useState)(""),[b,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(()=>{try{const n=a.b.getFiles(),s=e.startsWith("/")?e:"/"+e,i=n[s];if(i){const e=(new TextDecoder).decode(i);u(e),p(e)}else if(t){u(t),p(t);const e=(new TextEncoder).encode(t);a.b.writeFile(s,e)}}catch(n){console.error("Error loading file:",n)}})()},[e,t]),(0,s.useEffect)(()=>{f(h!==m)},[h,m]);const v=()=>{try{const t=e.startsWith("/")?e:"/"+e,n=(new TextEncoder).encode(h);a.b.writeFile(t,n),p(h),g("File saved successfully!"),setTimeout(()=>g(""),3e3)}catch(t){g(`Error saving file: ${t.message}`),setTimeout(()=>g(""),5e3)}},C=()=>{u(m),g("Changes discarded"),setTimeout(()=>g(""),3e3)},w=async()=>{try{await navigator.clipboard.writeText(h),g("Copied to clipboard!"),setTimeout(()=>g(""),3e3)}catch(e){g("Failed to copy"),setTimeout(()=>g(""),3e3)}},N=e=>{u(e.target.value)};return(0,r.jsxs)("div",{className:l.container,style:{width:i,height:o},children:[d.length>0&&(0,r.jsx)("div",{className:l.presetsBar,children:d.map((t,n)=>(0,r.jsx)("button",{onClick:()=>(t=>{u(t);try{const n=e.startsWith("/")?e:"/"+e,s=(new TextEncoder).encode(t);a.b.writeFile(n,s),p(t),g("Loaded preset"),setTimeout(()=>g(""),2e3)}catch(n){g(`Error loading preset: ${n.message}`),setTimeout(()=>g(""),5e3)}})(t.content),className:l.presetButton,title:`Load ${t.name}`,children:t.name},n))}),(0,r.jsxs)("div",{className:l.header,children:[(0,r.jsx)("div",{className:l.filename,children:e}),(0,r.jsxs)("div",{className:l.actions,children:[(0,r.jsx)("button",{onClick:()=>y(!0),className:l.buttonSecondary,title:"Expand to full screen",children:"Expand"}),(0,r.jsx)("button",{onClick:w,className:l.buttonSecondary,title:"Copy to clipboard",children:"Copy"}),!c&&x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:C,className:l.buttonSecondary,children:"Reset"}),(0,r.jsx)("button",{onClick:v,className:l.buttonPrimary,children:"Save to VFS"})]})]})]}),(0,r.jsxs)("div",{className:l.editorWrapper,children:[(0,r.jsx)("textarea",{value:h,onChange:N,readOnly:c,className:l.editor,spellCheck:!1}),j&&(0,r.jsx)("span",{className:l.message,children:j})]}),x&&!c&&(0,r.jsx)("div",{className:l.footer,children:(0,r.jsx)("small",{className:l.hint,children:'Unsaved changes - click "Save to VFS" to update the file'})}),b&&(0,r.jsx)("div",{className:l.modalOverlay,onClick:()=>y(!1),children:(0,r.jsxs)("div",{className:l.modalContent,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:l.modalHeader,children:[(0,r.jsx)("div",{className:l.filename,children:e}),(0,r.jsxs)("div",{className:l.actions,children:[(0,r.jsx)("button",{onClick:w,className:l.buttonSecondary,title:"Copy to clipboard",children:"Copy"}),!c&&x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:C,className:l.buttonSecondary,children:"Reset"}),(0,r.jsx)("button",{onClick:v,className:l.buttonPrimary,children:"Save to VFS"})]}),(0,r.jsx)("button",{onClick:()=>y(!1),className:l.buttonSecondary,title:"Close",children:"Close"})]})]}),(0,r.jsxs)("div",{className:l.editorWrapper,children:[(0,r.jsx)("textarea",{value:h,onChange:N,readOnly:c,className:l.modalEditor,spellCheck:!1,autoFocus:!0}),j&&(0,r.jsx)("span",{className:l.message,children:j})]})]})})]})}function c(e){return(0,r.jsx)(i.A,{fallback:(0,r.jsx)("div",{children:"Loading editor..."}),children:()=>(0,r.jsx)(o,{...e})})}},8634:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(6540),i=n(7851);const a={viewerContainer:"viewerContainer_i823",viewer:"viewer_AT5C",controls:"controls_He34",trajectoryControls:"trajectoryControls_FBT8",controlButtons:"controlButtons_G8ip",sliderContainer:"sliderContainer_WyWV",frameSlider:"frameSlider_YPdB",frameInfo:"frameInfo_jlzR",helpText:"helpText_Fz6Z",cubeControls:"cubeControls_m_W_",sliderLabel:"sliderLabel_S8Vg",slider:"slider_JOwf",optionsButton:"optionsButton_s3yl",optionsPanel:"optionsPanel_CTLN",optionItem:"optionItem_NCc6"};var l=n(4848);function r(e){try{const t=e.trim().split("\n");if(t.length<6)return null;const n=t[2].trim().split(/\s+/),s=parseFloat(n[1]),i=parseFloat(n[2]),a=parseFloat(n[3]),l=t[3].trim().split(/\s+/),r=t[4].trim().split(/\s+/),o=t[5].trim().split(/\s+/),c=parseInt(l[0]),d=parseInt(r[0]),h=parseInt(o[0]),u=parseFloat(l[1]),m=parseFloat(r[2]),p=parseFloat(o[3]),x=.529177;return{xMin:s*x,xMax:(s+(c-1)*u)*x,yMin:i*x,yMax:(i+(d-1)*m)*x,zMin:a*x,zMax:(a+(h-1)*p)*x}}catch(t){return console.error("Error parsing cube boundaries:",t),null}}function o(e){const t=e.trim().split("\n");if(t.length<6)return{min:1e-5,max:.5};const n=t[2].trim().split(/\s+/);let s=1/0,i=-1/0;for(let o=6+Math.abs(parseInt(n[0]));o<t.length;o++){const e=t[o].trim().split(/\s+/);for(const t of e){const e=parseFloat(t);isNaN(e)||(e<s&&(s=e),e>i&&(i=e))}}if(!isFinite(s)||!isFinite(i))return{min:1e-5,max:.5};const a=i-s;let l=s-.1*a,r=i+.1*a;return l=s>=0?Math.max(1e-5,l):Math.max(-1,l),r=Math.min(1,r),{min:l,max:r}}function c({data:e,cubeData:t,format:n="xyz",representation:c="ball+stick",width:d,height:h,backgroundColor:u="#ffffff",showControls:m=!0,cubeIsovalue:p=.002,cubeColor:x="#4169e1",cubeOpacity:f=.8,showMolecule:j=!0}){const g=(0,s.useRef)(null),b=(0,s.useRef)(null),y=(0,s.useRef)(null),v=(0,s.useRef)(null),C=(0,s.useRef)(null),[w,N]=(0,s.useState)(p),[_,F]=(0,s.useState)(1e-5),[S,k]=(0,s.useState)(.5),[E,O]=(0,s.useState)(!1),[I,T]=(0,s.useState)(!1),[R,z]=(0,s.useState)(null),B=()=>"dark"===document.documentElement.getAttribute("data-theme")?"#1b1b1d":u;(0,s.useEffect)(()=>{if(!g.current)return;const e=new i.BI(g.current,{backgroundColor:B()});b.current=e;const t=()=>{b.current&&b.current.handleResize()};window.addEventListener("resize",t);const n=new MutationObserver(()=>{b.current&&b.current.setParameters({backgroundColor:B()})});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>{window.removeEventListener("resize",t),n.disconnect(),b.current&&b.current.dispose()}},[u]),(0,s.useEffect)(()=>{if(!b.current||!e)return;const s=b.current;if(s.removeAllComponents(),v.current=null,y.current=null,"cube"===n){const{min:t,max:n}=o(e);F(t),k(n);const i=r(e);z(i);const a=new Blob([e],{type:"text/plain"});s.loadFile(a,{ext:"cube"}).then(e=>{if(!e)return;y.current=e;const t=e.addRepresentation("surface",{color:x,opacity:f,isolevel:w,isolevelType:"value",smooth:1});v.current=t,j&&e.addRepresentation("ball+stick",{sele:"*"}),e.autoView()}).catch(e=>{console.error("Error loading cube file:",e)})}else{let a=e,l=n;if("xyz"===n)try{a=function(e){const t=e.trim().split("\n");if(t.length<3)throw new Error("Invalid XYZ file: too few lines");const n=parseInt(t[0]);if(isNaN(n))throw new Error("Invalid XYZ file: first line must be number of atoms");let s=[];s.push("REMARK   XYZ file converted to PDB"),s.push(`REMARK   ${t[1]}`);for(let i=0;i<n&&i+2<t.length;i++){const e=t[i+2].trim();if(!e)continue;const n=e.split(/\s+/);if(n.length<4)continue;const a=n[0],l=parseFloat(n[1]),r=parseFloat(n[2]),o=parseFloat(n[3]);if(isNaN(l)||isNaN(r)||isNaN(o))continue;const c=(i+1).toString().padStart(5),d=a.padEnd(4),h="MOL".padEnd(3),u="A",m="1".padStart(4),p=l.toFixed(3).padStart(8),x=r.toFixed(3).padStart(8),f=o.toFixed(3).padStart(8),j="1.00",g="0.00".padStart(6),b=a.padStart(12);s.push(`ATOM  ${c} ${d} ${h} ${u}${m}    ${p}${x}${f}  ${j}${g}${b}`)}return s.push("END"),s.join("\n")}(e),l="pdb"}catch(i){return void console.error("Error converting XYZ to PDB:",i)}else if("cif"===n)try{a=function(e){const t=e.trim().split("\n");let n=1,s=1,i=1,a=90,l=90,r=90;const o=[];let c=!1,d=-1,h=-1,u=-1,m=-1,p=-1;for(let f=0;f<t.length;f++){const e=t[f].trim();if(e.startsWith("_cell_length_a")?n=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_length_b")?s=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_length_c")?i=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_angle_alpha")?a=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_angle_beta")?l=parseFloat(e.split(/\s+/)[1]):e.startsWith("_cell_angle_gamma")&&(r=parseFloat(e.split(/\s+/)[1])),e.startsWith("_atom_site_label"))c=!0,d=0;else if(c&&e.startsWith("_atom_site_"))e.includes("_atom_site_type_symbol")?h=e.split(/\s+/).length-1:e.includes("_atom_site_fract_x")?u=e.split(/\s+/).length-1:e.includes("_atom_site_fract_y")?m=e.split(/\s+/).length-1:e.includes("_atom_site_fract_z")&&(p=e.split(/\s+/).length-1);else if(c&&!e.startsWith("_")&&!e.startsWith("loop_")&&e.length>0){const t=e.split(/\s+/);if(t.length>=5){const e=t[0],a=t[1],l=parseFloat(t[2])*n,r=parseFloat(t[3])*s,c=parseFloat(t[4])*i;o.push({label:e,element:a,x:l,y:r,z:c})}}}if(0===o.length)throw new Error("No atoms found in CIF file");let x=[];return x.push("REMARK   CIF file converted to PDB (asymmetric unit only)"),x.push(`CRYST1${n.toFixed(3).padStart(9)}${s.toFixed(3).padStart(9)}${i.toFixed(3).padStart(9)}${a.toFixed(2).padStart(7)}${l.toFixed(2).padStart(7)}${r.toFixed(2).padStart(7)} P 1           1`),o.forEach((e,t)=>{const n=(t+1).toString().padStart(5),s=e.element.padEnd(4),i="MOL".padEnd(3),a="1".padStart(4),l=e.x.toFixed(3).padStart(8),r=e.y.toFixed(3).padStart(8),o=e.z.toFixed(3).padStart(8),c="0.00".padStart(6),d=e.element.padStart(12);x.push(`ATOM  ${n} ${s} ${i} A${a}    ${l}${r}${o}  1.00${c}${d}`)}),x.push("END"),x.join("\n")}(e),l="pdb"}catch(i){return void console.error("Error converting CIF to PDB:",i)}const d=new Blob([a],{type:"text/plain"});s.loadFile(d,{ext:l}).then(e=>{if(e&&(e.addRepresentation(c),e.autoView(),t)){const{min:e,max:n}=o(t);F(e),k(n);const i=r(t);z(i);const a=new Blob([t],{type:"text/plain"});s.loadFile(a,{ext:"cube"}).then(e=>{if(!e)return;y.current=e;const t=e.addRepresentation("surface",{color:x,opacity:f,isolevel:w,isolevelType:"value",smooth:1});v.current=t,s.autoView()}).catch(e=>{console.error("Error loading cube overlay:",e)})}}).catch(e=>{console.error("Error loading structure:",e)})}},[e,t,n,c,p,x,f,j]);return(0,s.useEffect)(()=>{if(b.current&&R){if(C.current)try{const e=C.current.parent;e&&b.current.removeComponent(e),C.current=null}catch(e){console.warn("Error removing previous box:",e)}if(I)try{const e=new i.yp("cube-bounds"),{xMin:t,xMax:n,yMin:s,yMax:a,zMin:l,zMax:r}=R,o=[.5,.5,.5],c=.02;e.addCylinder([t,s,l],[n,s,l],o,c),e.addCylinder([n,s,l],[n,a,l],o,c),e.addCylinder([n,a,l],[t,a,l],o,c),e.addCylinder([t,a,l],[t,s,l],o,c),e.addCylinder([t,s,r],[n,s,r],o,c),e.addCylinder([n,s,r],[n,a,r],o,c),e.addCylinder([n,a,r],[t,a,r],o,c),e.addCylinder([t,a,r],[t,s,r],o,c),e.addCylinder([t,s,l],[t,s,r],o,c),e.addCylinder([n,s,l],[n,s,r],o,c),e.addCylinder([n,a,l],[n,a,r],o,c),e.addCylinder([t,a,l],[t,a,r],o,c);const d=b.current.addComponentFromObject(e).addRepresentation("buffer");C.current=d}catch(e){console.error("Could not show cube boundaries:",e)}}},[I,R]),(0,l.jsxs)("div",{className:a.viewerContainer,style:{width:d,height:h||void 0,minHeight:h?void 0:400},children:[(0,l.jsx)("div",{ref:g,className:a.viewer}),("cube"===n||t)&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:a.cubeControls,children:[(0,l.jsxs)("label",{className:a.sliderLabel,children:[(0,l.jsx)("span",{style:{fontSize:"0.7rem",opacity:.7},children:"Isovalue:"}),(0,l.jsx)("strong",{children:w.toExponential(2)}),(0,l.jsx)("input",{type:"range",min:_,max:S,step:(S-_)/1e3,value:w,onChange:e=>{const t=parseFloat(e.target.value);N(t),v.current&&v.current.setParameters({isolevel:t})},className:a.slider})]}),(0,l.jsx)("button",{className:a.optionsButton,onClick:()=>O(!E),title:"Options",children:"\u22ee"})]}),E&&(0,l.jsxs)("div",{className:a.optionsPanel,children:[(0,l.jsx)("div",{className:a.optionItem,children:(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",checked:I,onChange:e=>T(e.target.checked)}),(0,l.jsx)("span",{children:"Show cube boundaries"})]})}),(0,l.jsxs)("div",{className:a.optionItem,style:{fontSize:"0.7rem",opacity:.6,marginTop:"0.5rem",paddingTop:"0.5rem",borderTop:"1px solid var(--ifm-color-emphasis-200)"},children:["Range: ",_.toExponential(2)," to ",S.toExponential(2)]})]})]})]})}},8768:(e,t,n)=>{n.d(t,{b:()=>s});const s=new class{files={};listeners=new Set;addFiles(e){this.files={...this.files,...e},this.notifyListeners()}getFiles(){return{...this.files}}getFile(e){return this.files[e]}hasFile(e){return e in this.files}writeFile(e,t){this.files[e]=t,this.notifyListeners()}removeFile(e){delete this.files[e],this.notifyListeners()}clear(){this.files={},this.notifyListeners()}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>e(this.getFiles()))}getFilePaths(){return Object.keys(this.files)}}},9024:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(6540),i=n(8478),a=n(8634),l=n(8768),r=n(4848);function o({file:e,cubeFile:t,format:n="xyz",representation:i="ball+stick",width:o=600,height:c=400,backgroundColor:d="#ffffff",showControls:h=!0,cubeIsovalue:u=.002,cubeColor:m="#4169e1",cubeOpacity:p=.7}){const[x,f]=(0,s.useState)(""),[j,g]=(0,s.useState)(""),[b,y]=(0,s.useState)("");return(0,s.useEffect)(()=>{const n=()=>{try{const n=l.b.getFiles(),s=n[e.startsWith("/")?e:"/"+e];if(s){const e=new TextDecoder;f(e.decode(s)),y("")}else y(`File not found: ${e}. Run the command above first.`);if(t){const e=n[t.startsWith("/")?t:"/"+t];if(e){const t=new TextDecoder;g(t.decode(e))}else g("")}}catch(n){y(`Error loading file: ${n.message}`)}};n();const s=setInterval(n,1e3);return()=>clearInterval(s)},[e,t]),b?(0,r.jsxs)("div",{style:{padding:"2rem",background:"#fff3cd",border:"1px solid #ffc107",borderRadius:"8px",margin:"1rem 0"},children:[(0,r.jsx)("strong",{children:"Viewer:"})," ",b]}):x?(0,r.jsx)(a.A,{data:x,cubeData:j,format:n,representation:i,width:o,height:c,backgroundColor:d,showControls:h,cubeIsovalue:u,cubeColor:m,cubeOpacity:p}):(0,r.jsxs)("div",{style:{padding:"2rem",background:"#e7f3ff",border:"1px solid #2196f3",borderRadius:"8px",margin:"1rem 0",textAlign:"center"},children:[(0,r.jsx)("p",{children:"Waiting for file to load..."}),(0,r.jsx)("small",{children:"Run the command above to generate the visualization file."})]})}function c(e){return(0,r.jsx)(i.A,{fallback:(0,r.jsx)("div",{children:"Loading viewer..."}),children:()=>(0,r.jsx)(o,{...e})})}},9970:(e,t,n)=>{n.d(t,{A:()=>h});var s=n(6540),i=n(8478),a=n(8768),l=n(1878),r=n(5859);const o={container:"container_QiYZ",header:"header_Z3QX",commandBlock:"commandBlock_KPH0",command:"command_ftG7",commandInput:"commandInput_U5bk",actions:"actions_r8hD",button:"button_UEjd",runButton:"runButton_N7WP",stopButton:"stopButton_URq7",fileTabsContainer:"fileTabsContainer_wVnt",fileTabs:"fileTabs_IWaP",fileTab:"fileTab_kFag",fileTabActive:"fileTabActive_bCSo",fileTabContent:"fileTabContent_nXd0",inputFilesList:"inputFilesList_CxPD",availableFiles:"availableFiles_UYvm",fileChips:"fileChips_YunZ",fileChip:"fileChip_OBOL",output:"output_MWSm",outputHeader:"outputHeader_CPe2",collapseButton:"collapseButton_O3zR",outputContent:"outputContent_TjO4",slideDown:"slideDown_ZpYm",highlight:"highlight_PWya",info:"info_NsEM",success:"success_xKBI",warning:"warning_qPPR",error:"error_MrOe",files:"files_dF_d",fileGrid:"fileGrid_mqCm",fileItem:"fileItem_Q2KA",fileName:"fileName_BN6Z",downloadIcon:"downloadIcon_IugX",footer:"footer_dCHd",expectedOutputs:"expectedOutputs_qSor",statusIndicator:"statusIndicator_eDzH"};var c=n(4848);function d({id:e,command:t,inputFiles:n={},expectedOutputs:i=[],language:d="bash",maxHeight:h="500px",highlights:u=[]}){const[m,p]=(0,s.useState)(""),[x,f]=(0,s.useState)(!1),[j,g]=(0,s.useState)(null),[b,y]=(0,s.useState)({}),[v,C]=(0,s.useState)([]),[w,N]=(0,s.useState)(t),[_,F]=(0,s.useState)(!1),[S,k]=(0,s.useState)(!1),[E,O]=(0,s.useState)("input"),I=(0,s.useRef)(null),T=(0,s.useRef)(null);(0,s.useEffect)(()=>{const e=()=>{C(a.b.getFilePaths())};e();return a.b.subscribe(e)},[]),(0,s.useEffect)(()=>{T.current&&!S&&(T.current.scrollTop=T.current.scrollHeight)},[m,S]),(0,s.useEffect)(()=>{e&&m&&(0,l.H)(e,m)},[e,m]),(0,s.useEffect)(()=>{Object.keys(b).length>0&&O("output")},[b]);const R=async()=>{p(""),g(null),y({}),f(!0),F(!1),k(!1);try{const e=w.trim().split(/\s+/);if("occ"!==e[0])return g('Command must start with "occ"'),void f(!1);const t=e.slice(1),s={},i=a.b.getFiles();Object.assign(s,i);for(const[a,o]of Object.entries(n)){const e=new TextEncoder;s["/"+a]=e.encode(o)}const l=new Set(Object.keys(s)),r=new Worker("/occ-run-worker.js");I.current=r,r.onmessage=e=>{const{type:t,text:n,code:s,files:i}=e.data;switch(t){case"output":case"error":p(e=>e+n+"\n");break;case"ready":break;case"exit":if(i){const e={},t={};for(const[n,s]of Object.entries(i)){const i=n.startsWith("/basis/")||n.startsWith("/methods/")||n.startsWith("/solvent/")||n.startsWith("/lib/")||n.startsWith("/usr/")||n.startsWith("/etc/")||n.startsWith("/dev/")||"/dev/null"===n||"/sgdata.json"===n;i||(t[n]=s),l.has(n)||i||(e[n]=s)}a.b.addFiles(t),y(e)}r.terminate(),I.current=null,f(!1),0!==s&&g(`Command exited with code ${s}`)}},r.onerror=e=>{g(e.message),f(!1),r.terminate(),I.current=null},r.postMessage({command:t.join(" "),cwd:"/",files:s})}catch(e){g(e.message),f(!1)}},z=()=>{N(t),F(!1)},B=Object.keys(b);return(0,c.jsxs)("div",{className:o.container,children:[(0,c.jsxs)("div",{className:o.header,children:[(0,c.jsx)("div",{className:o.commandBlock,children:_?(0,c.jsx)("input",{type:"text",value:w,onChange:e=>N(e.target.value),onBlur:()=>F(!1),onKeyDown:e=>{"Enter"===e.key?R():"Escape"===e.key&&z()},className:o.commandInput,autoFocus:!0}):(0,c.jsx)("code",{className:o.command,onClick:()=>F(!0),title:"Click to edit",children:w})}),(0,c.jsxs)("div",{className:o.actions,children:[w!==t&&(0,c.jsx)("button",{onClick:z,className:o.button,title:"Reset to original command",children:"Reset"}),(0,c.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(w)},className:o.button,title:"Copy command to clipboard",children:"Copy"}),(0,c.jsx)("button",{onClick:x?()=>{I.current&&(I.current.terminate(),I.current=null,f(!1),p(e=>e+"\n[Command interrupted by user]\n"))}:R,className:`${o.button} ${x?o.stopButton:o.runButton}`,title:x?"Stop command":"Run command in browser",children:x?"Stop":"Run"})]})]}),(Object.keys(n).length>0||B.length>0)&&(0,c.jsxs)("div",{className:o.fileTabsContainer,children:[(0,c.jsxs)("div",{className:o.fileTabs,children:[Object.keys(n).length>0&&(0,c.jsxs)("button",{className:`${o.fileTab} ${"input"===E?o.fileTabActive:""}`,onClick:()=>O("input"),children:["Input Files (",Object.keys(n).length,")"]}),B.length>0&&(0,c.jsxs)("button",{className:`${o.fileTab} ${"output"===E?o.fileTabActive:""}`,onClick:()=>O("output"),children:["Output Files (",B.length,")"]})]}),(0,c.jsxs)("div",{className:o.fileTabContent,children:["input"===E&&Object.keys(n).length>0&&(0,c.jsx)("ul",{className:o.inputFilesList,children:Object.keys(n).map(e=>(0,c.jsx)("li",{children:(0,c.jsx)("code",{children:e})},e))}),"output"===E&&B.length>0&&(0,c.jsx)("div",{className:o.fileGrid,children:B.map(e=>(0,c.jsxs)("div",{className:o.fileItem,onClick:()=>(e=>{const t=b[e];if(!t)return;const n=new Blob([t],{type:"application/octet-stream"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=e.split("/").pop()||"download",i.click(),URL.revokeObjectURL(s)})(e),title:"Click to download",children:[(0,c.jsx)("span",{className:o.fileName,children:e.startsWith("/")?e.slice(1):e}),(0,c.jsx)("span",{className:o.downloadIcon,children:"\u2193"})]},e))})]})]}),v.length>0&&0===Object.keys(n).length&&0===B.length&&(0,c.jsxs)("div",{className:o.availableFiles,children:[(0,c.jsx)("strong",{children:"Available files from previous commands:"}),(0,c.jsx)("div",{className:o.fileChips,children:v.map(e=>(0,c.jsx)("span",{className:o.fileChip,children:e.startsWith("/")?e.slice(1):e},e))})]}),m&&(0,c.jsxs)("div",{className:o.output,children:[(0,c.jsxs)("div",{className:o.outputHeader,onClick:()=>k(!S),children:[(0,c.jsx)("strong",{children:"Output"}),(0,c.jsx)("button",{className:o.collapseButton,children:S?"\u25b6":"\u25bc"})]}),!S&&(0,c.jsx)("pre",{ref:T,className:o.outputContent,style:{maxHeight:h},children:(()=>{if(0===u.length||!m)return m;const e=m.split("\n"),t=[];return e.forEach((n,i)=>{let a=[n];u.forEach((e,t)=>{const n="string"==typeof e.pattern?new RegExp(e.pattern,"g"):e.pattern,s=[];a.forEach(a=>{if("string"==typeof a){let l=0;const r=[];let d;for(n.lastIndex=0;null!==(d=n.exec(a));)r.push({...d}),d.index===n.lastIndex&&n.lastIndex++;0===r.length?s.push(a):(r.forEach((n,r)=>{n.index>l&&s.push(a.substring(l,n.index));const d=e.className||"highlight";s.push((0,c.jsx)("span",{className:o[d],title:e.label,children:n[0]},`${i}-${t}-${r}`)),l=n.index+n[0].length}),l<a.length&&s.push(a.substring(l)))}else s.push(a)}),a=s}),t.push((0,c.jsxs)(s.Fragment,{children:[a,i<e.length-1&&"\n"]},i))}),t})()})]}),j&&(0,c.jsxs)("div",{className:o.error,children:[(0,c.jsx)("strong",{children:"Error:"})," ",j]}),(0,c.jsxs)("div",{className:o.footer,children:[i.length>0&&!x&&0===B.length&&!m&&(0,c.jsx)("div",{className:o.expectedOutputs,children:(0,c.jsxs)("small",{children:["Expected outputs: ",i.join(", ")]})}),(0,c.jsx)("div",{className:o.statusIndicator,children:(0,c.jsx)(r.T,{position:"inline",showText:!1})})]})]})}function h(e){return(0,c.jsx)(i.A,{fallback:(0,c.jsx)("div",{children:"Loading..."}),children:()=>(0,c.jsx)(d,{...e})})}}}]);